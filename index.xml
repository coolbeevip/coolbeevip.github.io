<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title/><link>https://coolbeevip.github.io/</link><description>Recent content on</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Fri, 11 Mar 2022 13:24:14 +0800</lastBuildDate><atom:link href="https://coolbeevip.github.io/index.xml" rel="self" type="application/rss+xml"/><item><title>Docker IPv6 Support</title><link>https://coolbeevip.github.io/posts/ipv6/ipv6-docker/</link><pubDate>Fri, 11 Mar 2022 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/ipv6/ipv6-docker/</guid><description>æœ¬æ–‡ä»‹ç»åœ¨ IPv6 ç½‘ç»œä¸»æœºä¸Šéƒ¨ç½² Docker
ä¸»æœº IPv6 ç½‘ç»œæ£€æŸ¥ ä½¿ç”¨ ifconfig å‘½ä»¤æŸ¥çœ‹æ˜¯å¦å·²ç»é…ç½®äº† IPv6 ç½‘ç»œ
$ ifconfig eth1 eth1: flags=4163&amp;lt;UP,BROADCAST,RUNNING,MULTICAST&amp;gt; mtu 1500 inet 10.252.248.152 netmask 255.255.255.128 broadcast 10.252.248.255 inet6 2409:8010:5ac0:400:200::2d prefixlen 128 scopeid 0x0&amp;lt;global&amp;gt; inet6 fe80::f816:3eff:fe84:bc36 prefixlen 64 scopeid 0x20&amp;lt;link&amp;gt; ether fa:16:3e:84:bc:36 txqueuelen 1000 (Ethernet) RX packets 7150695 bytes 4751783652 (4.4 GiB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 5018420 bytes 4436770306 (4.</description></item><item><title>Linux Command - Memory</title><link>https://coolbeevip.github.io/posts/linux/linux-commands-memory/</link><pubDate>Fri, 11 Mar 2022 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/linux/linux-commands-memory/</guid><description>Linux å†…å­˜ç›¸å…³å‘½ä»¤
æŸ¥çœ‹ç³»ç»Ÿå†…å­˜ # free -h total used free shared buff/cache available Mem: 251G 40G 1.4G 4.0G 209G 206G Swap: 4.0G 3.7G 312M å†…å­˜å ç”¨ TOP N # ps aux | sort -k4,4nr | head -n 5 200 139348 227 6.9 38668500 18410776 ? Ssl 3æœˆ10 1905:49 /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.282.b08-2.el8_3.x86_64/jre/bin/java...org.sonatype.nexus.karaf.NexusMain mysql 33407 1.2 2.2 349722012 6012524 ? Sl 2021 4596:18 /usr/local/mysql/bin/mysqld --basedir=/usr/local/mysql mysql 118257 0.4 0.5 10170064 1536084 ? Ssl 2æœˆ28 66:04 /usr/share/elasticsearch/jdk/bin/java -Xms1g -Xmx1g -XX:+UseConcMarkSweepGC root 42564 9.</description></item><item><title>Very High CPU usage Sonatype Nexus Docker</title><link>https://coolbeevip.github.io/posts/nexus/very-high-cpu-usage-sonatype-nexus-docker/</link><pubDate>Fri, 11 Mar 2022 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/nexus/very-high-cpu-usage-sonatype-nexus-docker/</guid><description>æœ¬æ–‡è®°å½• Sonatype Nexus ç§æœé‡åˆ°æ€§èƒ½åŠ£åŒ–é—®é¢˜çš„åˆ†æè¿‡ç¨‹ï¼ˆæœªè§£å†³ï¼‰
ç¯å¢ƒè¯´æ˜ ä½¿ç”¨ sonatype/nexus3 é•œåƒå¯åŠ¨ï¼Œé€šè¿‡æŒ‚è½½å·å­˜å‚¨æ•°æ®
Nexus é…ç½®ï¼Œå¯ä»¥çœ‹åˆ°å…³é”®é…ç½® -Xms8g -Xmx8g -XX:MaxDirectMemorySize=35158M -XX:+UseConcMarkSweepGC
200 105083 105062 99 11:01 ? 2-00:51:44 /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.282.b08-2.el8_3.x86_64/jre/bin/java -server -Dinstall4j.jvmDir=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.282.b08-2.el8_3.x86_64/jre -Dexe4j.moduleName=/opt/sonatype/nexus/bin/nexus -XX:+UnlockDiagnosticVMOptions -Dinstall4j.launcherId=245 -Dinstall4j.swt=false -Di4jv=0 -Di4jv=0 -Di4jv=0 -Di4jv=0 -Di4jv=0 -Xms8g -Xmx8g -XX:MaxDirectMemorySize=35158M -XX:ActiveProcessorCount=16 -XX:+UseParNewGC -XX:ParallelGCThreads=12 -XX:MaxTenuringThreshold=6 -XX:SurvivorRatio=5 -XX:+UseConcMarkSweepGC -XX:-CMSParallelRemarkEnabled -XX:CMSInitiatingOccupancyFraction=65 -XX:+UseCMSInitiatingOccupancyOnly -XX:+UseCMSCompactAtFullCollection -XX:+CMSClassUnloadingEnabled -XX:+DisableExplicitGC -XX:+PrintGCDetails -Xloggc:/nexus-data/vgc/nexus-1646967690.vgc -XX:+UnlockDiagnosticVMOptions -XX:+LogVMOutput -XX:LogFile=../sonatype-work/nexus3/log/jvm.log -XX:-OmitStackTraceInFastThrow -Djava.net.preferIPv4Stack=true -Dkaraf.home=. -Dkaraf.base=. -Dkaraf.etc=etc/karaf -Djava.util.logging.config.file=etc/karaf/java.util.logging.properties -Dkaraf.data=../sonatype-work/nexus3 -Dkaraf.log=../sonatype-work/nexus3/log -Djava.io.tmpdir=../sonatype-work/nexus3/tmp -Dkaraf.startLocalConsole=false -Djdk.tls.ephemeralDHKeySize=2048 -Djava.endorsed.dirs=lib/endorsed -Di4j.vpt=true -classpath /opt/sonatype/nexus/.install4j/i4jruntime.jar:/opt/sonatype/nexus/lib/boot/nexus-main.jar:/opt/sonatype/nexus/lib/boot/activation-1.1.1.jar:/opt/sonatype/nexus/lib/boot/jakarta.xml.bind-api-2.3.3.jar:/opt/sonatype/nexus/lib/boot/jaxb-runtime-2.3.3.jar:/opt/sonatype/nexus/lib/boot/txw2-2.3.3.jar:/opt/sonatype/nexus/lib/boot/istack-commons-runtime-3.0.10.jar:/opt/sonatype/nexus/lib/boot/org.apache.karaf.main-4.3.6.jar:/opt/sonatype/nexus/lib/boot/osgi.core-7.0.0.jar:/opt/sonatype/nexus/lib/boot/org.apache.karaf.specs.activator-4.3.6.jar:/opt/sonatype/nexus/lib/boot/org.apache.karaf.diagnostic.boot-4.3.6.jar:/opt/sonatype/nexus/lib/boot/org.apache.karaf.jaas.boot-4.3.6.jar com.install4j.runtime.launcher.UnixLauncher run 9d17dc87 0 0 org.</description></item><item><title>Migrate Spring Data Elasticsearch from 3.x version to 4.x</title><link>https://coolbeevip.github.io/posts/elasticsearch/migrate-spring-data-elasticsearch-from-3.x-version-to-4.x/</link><pubDate>Sun, 06 Mar 2022 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/elasticsearch/migrate-spring-data-elasticsearch-from-3.x-version-to-4.x/</guid><description>Spring Data Elasticsearch ä» 3.X è¿ç§»åˆ° 4.X
å› ä¸ºéœ€è¦å°†äº§å“çš„ spring boot 2.1.6.RELEASE å‡çº§åˆ° 2.3.12.RELEASEï¼Œå‡çº§è¿‡ç¨‹ä¸­å‘ç°æœ‰ä¸€äº›éœ€è¦è¿ç§»çš„éƒ¨åˆ†ï¼Œç‰¹æ­¤æ•´ç†è®°å½•ã€‚ æœ¬æ–‡ä¸æ˜¯è¿ç§»æŒ‡å—ï¼Œä»…ä»…æ˜¯å·¥ä½œä¸­é‡åˆ°çš„è¿ç§»é—®é¢˜ç¬”è®°
ä¾èµ–ç»„ä»¶ ç»„ä»¶ è¿ç§»å‰ è¿ç§»å spring-data-elasticsearch 3.1.9 4.0.9 elasticsearch 6.4.3 7.6.2 GetQuery å·²åºŸå¼ƒ ä»¥ä¸‹ä»£ç ä¸­ GetQuery å·²ç»è¢«åºŸå¼ƒï¼Œå¹¶ä¸” getQuery.setId æ–¹æ³•å·²ç»è¢«åˆ é™¤
GetQuery getQuery = new GetQuery(); getQuery.setId(globalTxId); GlobalTransactionDocument globalTransaction = this.template .queryForObject(getQuery, GlobalTransactionDocument.class); ä½¿ç”¨ä»¥ä¸‹ä»£ç æ›¿æ¢
Query query = new NativeSearchQueryBuilder().withIds(Collections.singletonList(globalTxId)).build(); SearchHit&amp;lt;GlobalTransactionDocument&amp;gt; result = this.template.searchOne(query, GlobalTransactionDocument.class); GlobalTransactionDocument globalTransaction = result.</description></item><item><title>Using OWASP Dependency Vulnerabilities Check with Maven</title><link>https://coolbeevip.github.io/posts/maven/maven-using-owasp-dependency-vulnerabilities-check/</link><pubDate>Thu, 24 Feb 2022 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/maven/maven-using-owasp-dependency-vulnerabilities-check/</guid><description>ä½¿ç”¨ OWASP ä¾èµ–æ£€æŸ¥ Maven æ’ä»¶ dependency-check-maven å‘ç°ä¾èµ–æ¼æ´
å¢åŠ ç¼–è¯‘æ’ä»¶ åœ¨ pom.xml ä¸­å¢åŠ å¦‚ä¸‹é…ç½®ï¼Œå¦‚æœæ˜¯å¤šæ¨¡å—é¡¹ç›®è¯·å¢åŠ åœ¨æœ€å¤–å±‚ pom.xml ä¸­ï¼Œå¹¶ä¸”é…ç½® &amp;lt;goal&amp;gt; ä¸º aggregate
&amp;lt;properties&amp;gt; &amp;lt;dependency-check-maven.version&amp;gt;6.5.3&amp;lt;/dependency-check-maven.version&amp;gt; &amp;lt;/properties&amp;gt; &amp;lt;build&amp;gt; &amp;lt;plugins&amp;gt; &amp;lt;plugin&amp;gt; &amp;lt;groupId&amp;gt;org.owasp&amp;lt;/groupId&amp;gt; &amp;lt;artifactId&amp;gt;dependency-check-maven&amp;lt;/artifactId&amp;gt; &amp;lt;version&amp;gt;${dependency-check-maven.version}&amp;lt;/version&amp;gt; &amp;lt;configuration&amp;gt; &amp;lt;name&amp;gt;notifier-dependency-check&amp;lt;/name&amp;gt; &amp;lt;format&amp;gt;HTML&amp;lt;/format&amp;gt; &amp;lt;failBuildOnCVSS&amp;gt;9&amp;lt;/failBuildOnCVSS&amp;gt; &amp;lt;failOnError&amp;gt;false&amp;lt;/failOnError&amp;gt; &amp;lt;skipProvidedScope&amp;gt;true&amp;lt;/skipProvidedScope&amp;gt; &amp;lt;skipRuntimeScope&amp;gt;true&amp;lt;/skipRuntimeScope&amp;gt; &amp;lt;skipTestScope&amp;gt;true&amp;lt;/skipTestScope&amp;gt; &amp;lt;retireJsAnalyzerEnabled&amp;gt;false&amp;lt;/retireJsAnalyzerEnabled&amp;gt; &amp;lt;skipArtifactType&amp;gt;pom&amp;lt;/skipArtifactType&amp;gt; &amp;lt;/configuration&amp;gt; &amp;lt;executions&amp;gt; &amp;lt;execution&amp;gt; &amp;lt;goals&amp;gt; &amp;lt;goal&amp;gt;aggregate&amp;lt;/goal&amp;gt; &amp;lt;/goals&amp;gt; &amp;lt;/execution&amp;gt; &amp;lt;/executions&amp;gt; &amp;lt;/plugin&amp;gt; &amp;lt;/plugins&amp;gt; &amp;lt;/build&amp;gt; failBuildOnCVSS å½“å‘ç°æ­¤çº§åˆ«çš„æ¼æ´åç¼–è¯‘å¤±è´¥ï¼Œè¯„åˆ†å’Œä¸¥é‡ç­‰çº§å¦‚ä¸‹</description></item><item><title>Run Docker without Docker Desktop on macOS</title><link>https://coolbeevip.github.io/posts/kubernetes/run-docker-without-docker-desktop-on-macos/</link><pubDate>Mon, 14 Feb 2022 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/kubernetes/run-docker-without-docker-desktop-on-macos/</guid><description>ç”±äº Docker Desktop ä¿®æ”¹äº†æˆæƒæ¡æ¬¾ï¼Œä¸å†å¯¹ä¼ä¸šç”¨æˆ·å…è´¹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å•Šå¯»æ±‚ä¸€ç§æ›¿ä»£å“ã€‚åˆ°ç›®å‰ä¸ºæ­¢ Minikube å·²ç»æˆä¸º Docker Desktop æœ€ç®€å•çš„æ›¿ä»£å“ã€‚ Minikube ç”¨äºåœ¨æœ¬åœ°ç¯å¢ƒä¸­è¿è¡Œ Kubernetes é›†ç¾¤ï¼Œä½†å®ƒä¹Ÿè¿è¡Œäº†ä¸€ä¸ªå¯ç”¨äºè¿è¡Œå®¹å™¨çš„ Docker å®ˆæŠ¤è¿›ç¨‹ã€‚å¦‚æœä½ ä¸éœ€è¦ä½¿ç”¨ Kubernetes ï¼Œé‚£ä¹ˆä½ å¯ä»¥é€šè¿‡ minikube pause æš‚åœ Kubernetes ç›¸å…³é•œåƒï¼Œä»è€Œè§£å†³ç³»ç»Ÿèµ„æºã€‚
åœ¨ macOS ä¸Šï¼ŒMinikube è¿è¡Œåœ¨å¾ˆå¤šè™šæ‹ŸåŒ–æŠ€æœ¯ä¸Šï¼Œç”±äºISSUE-6296åŸå› ï¼Œæœ¬ä¾‹ä½¿ç”¨ Virtualbox æ–¹å¼ï¼ˆä½ éœ€è¦å…ˆå®‰è£… Virtualboxï¼‰ã€‚
å¸è½½ Docker Desktop for macOS å¦‚æœä½ ä¹‹å‰å®‰è£…è¿‡ Docker Desktopï¼Œé‚£ä¹ˆä½ éœ€è¦å…ˆå¸è½½å®ƒ
åœ¨ Docker Desktop èœå•ä¸­é€‰æ‹© Troubleshoot å¹¶ä¸”é€‰æ‹© Uninstall. åˆ é™¤ /Applications/Docker.app å®‰è£… Docker CLI å› ä¸ºå¸è½½ Docker Desktop åå°†è‡ªåŠ¨å¸è½½ Docker CLIï¼Œæ‰€ä»¥ä½ éœ€è¦å•ç‹¬å®‰è£…
$ brew install docker $ brew install docker-compose æç¤ºï¼š åœ¨æ‰§è¡Œ brew install docker-compose å‘½ä»¤çš„æ—¶å€™å¯èƒ½å¾—åˆ°å¦‚ä¸‹çš„å¤±è´¥ä¿¡æ¯ï¼Œè¿™æ˜¯å› ä¸ºä¾èµ–åŒ…ä¸‹è½½å¤±è´¥ã€‚ä½ å¯ä»¥ä½¿ç”¨ brew install gdbm å•ç‹¬ä¸‹è½½ä¾èµ–åŒ…ï¼Œå°±é¿å…äº†æ‰¾ä¸åˆ°ä¾èµ–ç‰ˆæœ¬çš„é”™è¯¯ã€‚</description></item><item><title>Kubectl Commands</title><link>https://coolbeevip.github.io/posts/kubernetes/kubectl-commands/</link><pubDate>Sun, 19 Dec 2021 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/kubernetes/kubectl-commands/</guid><description>å¸¸ç”¨ Kubectl å‘½ä»¤
åˆ›å»ºå‘½åç©ºé—´ æ–°å»ºä¸€ä¸ªåä¸º nc-namespace.yaml çš„ YAML æ–‡ä»¶
apiVersion: v1 kind: Namespace metadata: name: nc-namespace ç„¶åè¿è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºå‘½åç©ºé—´
$ kubectl create -f nc-namespace.yaml namespace/nc-namespace created åˆ›å»ºå‘½åç©ºé—´èµ„æºé…é¢æ–‡ä»¶ æ–°å»ºä¸€ä¸ªåä¸º nc-quota.yaml çš„ YAML æ–‡ä»¶
apiVersion: v1 kind: ResourceQuota metadata: name: nc-quota namespace: nc-namespace spec: hard: pods: &amp;#34;10&amp;#34; requests.cpu: &amp;#34;2&amp;#34; requests.memory: 2Gi limits.cpu: &amp;#34;4&amp;#34; limits.memory: 4Gi ç„¶åè¿è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºèµ„æºé…é¢
$ kubectl create -f nc-quota.yaml resourcequota/nc-quota created åˆ›å»º PV å·å’Œ PVC æ–°å»ºä¸€ä¸ªåä¸º nc-pv.</description></item><item><title>Automate Install Kafka Cluster with Ansible Playbook</title><link>https://coolbeevip.github.io/posts/ansible/ansible-kafka-cluster/</link><pubDate>Thu, 09 Dec 2021 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/ansible/ansible-kafka-cluster/</guid><description>é›†ç¾¤æ¦‚è¿° æ­¤è„šæœ¬ä¸­çš„é…ç½®åŸºäº Kafka 2.6.3 ç‰ˆæœ¬ ä½¿ç”¨ Kafka å‘å¸ƒåŒ…ä¸­è‡ªå¸¦çš„ Zookeeper ç»„ä»¶ï¼ˆé€šå¸¸è¿™æ²¡æœ‰é—®é¢˜ï¼Œé™¤éä½ è¦å°† Zookeeper å®‰è£…åœ¨å•ç‹¬çš„æœåŠ¡å™¨ä¸Šï¼‰ åœ¨ Kafka å®‰è£…ç›®å½•ä¸‹ç‹¬ç«‹å®‰è£… JDKï¼Œç›®å‰åªæ”¯æŒ Java 8 å’Œ Java 11ã€‚ å®‰è£…è®¡åˆ’ æœåŠ¡å™¨è§„åˆ’
IP SSH ç«¯å£ SSH ç”¨æˆ· SSH å¯†ç  ROOT å¯†ç  OS 10.1.207.177 22022 kafka 123456 root123 CentOS Linux release 7.9.2009 10.1.207.178 22022 kafka 123456 root123 CentOS Linux release 7.9.2009 10.1.207.183 22022 kafka 123456 root123 CentOS Linux release 7.</description></item><item><title>Automate Install AntDB Distributed Cluster with Ansible Playbook</title><link>https://coolbeevip.github.io/posts/ansible/ansible-antdb-distributed-cluster/</link><pubDate>Sun, 05 Dec 2021 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/ansible/ansible-antdb-distributed-cluster/</guid><description>é›†ç¾¤æ¦‚è¿° åŒ…å«ç»„ä»¶
MGR é›†ç¾¤çš„ç®¡ç† GTM å…¨å±€äº‹åŠ¡ç®¡ç† Coordinator åè°ƒå‘˜ç®¡ç†ç”¨æˆ·ä¼šè¯ Data Node æ•°æ®èŠ‚ç‚¹ å®‰è£…è®¡åˆ’ æœåŠ¡å™¨è§„åˆ’
IP SSH ç«¯å£ SSH ç”¨æˆ·å SSH å¯†ç  ROOT å¯†ç  OS 10.1.207.180 22022 antdb 123456 root123 CentOS Linux release 7.9.2009 10.1.207.181 22022 antdb 123456 root123 CentOS Linux release 7.9.2009 10.1.207.182 22022 antdb 123456 root123 CentOS Linux release 7.9.2009 æç¤ºï¼š å¯ä»¥å‚è€ƒæ‰¹é‡è‡ªåŠ¨åŒ–åˆ›å»ºç”¨æˆ·
é›†ç¾¤èŠ‚ç‚¹è§„åˆ’
IP MGR GTM Coordinator DataNode 10.</description></item><item><title>Automate Install Redis Master-Slave Sentinel with Ansible Playbook</title><link>https://coolbeevip.github.io/posts/ansible/ansible-redis-master-slave-sentinel/</link><pubDate>Sun, 05 Dec 2021 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/ansible/ansible-redis-master-slave-sentinel/</guid><description>é›†ç¾¤æ¦‚è¿° è¯·å…ˆåœ¨ç›®æ ‡æœåŠ¡å™¨åˆ›å»º redis ç”¨æˆ·ï¼Œæ­¤è„šæœ¬åœ¨æ­¤ç”¨æˆ·ä¸‹ä½¿ç”¨æºä»£ç ç¼–è¯‘çš„æ–¹å¼å®‰è£…ä¸€ä¸»ä¸¤ä»ä¸‰å“¨å…µçš„é›†ç¾¤
å®‰è£…è®¡åˆ’ æœåŠ¡å™¨è§„åˆ’
IP SSH ç«¯å£ SSH ç”¨æˆ·å SSH å¯†ç  ROOT å¯†ç  OS 10.1.207.180 22022 redis redis123 root123 CentOS Linux release 7.9.2009 10.1.207.181 22022 redis redis123 root123 CentOS Linux release 7.9.2009 10.1.207.182 22022 redis redis123 root123 CentOS Linux release 7.9.2009 æç¤ºï¼š å¯ä»¥å‚è€ƒæ‰¹é‡è‡ªåŠ¨åŒ–åˆ›å»ºç”¨æˆ·
é›†ç¾¤èŠ‚ç‚¹è§„åˆ’
IP Redis Sentinel 10.</description></item><item><title>Slow LOG In Redis</title><link>https://coolbeevip.github.io/posts/redis/redis-slowlog/</link><pubDate>Sun, 05 Dec 2021 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/redis/redis-slowlog/</guid><description>SLOWLOG è®°å½•äº† Redis è¿è¡Œæ—¶é—´è¶…æ—¶ç‰¹å®šé˜€å€¼çš„å‘½ä»¤ã€‚è¿™ç±»æ…¢æŸ¥è¯¢å‘½ä»¤è¢«ä¿å­˜åœ¨ Redis æœåŠ¡å™¨çš„ä¸€ä¸ªå®šé•¿é˜Ÿåˆ—ä¸­ï¼Œæœ€å¤šä¿å­˜ slowlog-max-len(é»˜è®¤128ï¼‰ä¸ªæ…¢æŸ¥è¯¢å‘½ä»¤ã€‚å½“æ…¢æŸ¥è¯¢å‘½ä»¤è¾¾åˆ°128ä¸ªæ—¶ï¼Œæ–°äº§ç”Ÿçš„æ…¢æŸ¥è¯¢è¢«åŠ å…¥å‰ï¼Œä¼šä»é˜Ÿåˆ—ä¸­åˆ é™¤æœ€æ—§çš„æ…¢æŸ¥è¯¢å‘½ä»¤ã€‚
é…ç½® redis slowlogé€šè¿‡2ä¸ªå‚æ•°é…ç½®ç®¡ç†ï¼Œé»˜è®¤å‘½ä»¤è€—æ—¶è¶…è¿‡10æ¯«ç§’ï¼Œå°±ä¼šè¢«è®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—é˜Ÿåˆ—ä¸­ï¼›é˜Ÿåˆ—é»˜è®¤ä¿å­˜æœ€è¿‘äº§ç”Ÿçš„128ä¸ªæ…¢æŸ¥è¯¢å‘½ä»¤ã€‚
slowlog-log-slower-than: æ…¢æŸ¥è¯¢é˜€å€¼ï¼Œå•ä½å¾®ç§’ï¼Œé»˜è®¤100000 (10æ¯«ç§’)ï¼› æ‰§è¡Œè€—æ—¶è¶…è¿‡è¿™ä¸ªå€¼çš„æŸ¥è¯¢ä¼šè¢«è®°å½•ï¼›å»ºè®®ä½ ç”Ÿäº§ç¯å¢ƒè®¾ç½®ä¸º 10000ï¼ˆ1æ¯«ç§’ï¼‰ï¼Œå› ä¸ºå¦‚æœå‘½ä»¤éƒ½æ˜¯ 1 æ¯«ç§’ä»¥ä¸Šï¼Œé‚£ä¹ˆ Redis ååç‡åªæœ‰ 1000 QPSï¼›
slowlog-max-len: æ…¢æŸ¥è¯¢å­˜å‚¨çš„æœ€å¤§ä¸ªæ•°ï¼Œé»˜è®¤128ï¼›ç”Ÿäº§è®¾ç½®è®¾ç½®å¤§äº1024ï¼Œå› ä¸º slowlog ä¼šçœç•¥è¿‡å¤šçš„å‚æ•°ï¼Œæ…¢æŸ¥è¯¢ä¸ä¼šå ç”¨è¿‡å¤šçš„å†…å­˜ï¼›
è¯»å– è¿”å›æœ€æ–°çš„ 2 æ¡æ…¢æŸ¥è¯¢
SLOWLOG GET 2 1) 1) (integer) 9495 2) (integer) 1638760173 3) (integer) 13923 4) 1) &amp;#34;COMMAND&amp;#34; 5) &amp;#34;10.30.107.152:41830&amp;#34; 6) &amp;#34;&amp;#34; 2) 1) (integer) 9494 2) (integer) 1638759729 3) (integer) 17170 4) 1) &amp;#34;SADD&amp;#34; 2) &amp;#34;nc_oauth:uname_to_access:nc:vpengcheng&amp;#34; 3) &amp;#34;\xac\xed\x00\x05sr\x00Corg.</description></item><item><title>Automate Install MySQL InnoDB Cluster with Ansible Playbook</title><link>https://coolbeevip.github.io/posts/ansible/ansible-mysql-innodb-cluster/</link><pubDate>Sun, 21 Nov 2021 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/ansible/ansible-mysql-innodb-cluster/</guid><description>é›†ç¾¤æ¦‚è¿° MySQL InnoDB Cluster æ˜¯ MySQL å›¢é˜Ÿä¸ºäº†é«˜å¯ç”¨æ€§ (HA) ç›®çš„è€Œå¼•å…¥çš„ã€‚å®ƒä¸º MySQL æä¾›äº†å®Œæ•´çš„é«˜å¯ç”¨è§£å†³æ–¹æ¡ˆã€‚æˆ‘å°†é€šè¿‡ Ansible Playbook å±•ç¤ºä¸‰ä¸ªèŠ‚ç‚¹çš„ InnoDB é›†ç¾¤é…ç½®ã€‚
MySQL InnoDB é›†ç¾¤æœ‰ä»¥ä¸‹æœåŠ¡ç»„æˆ
MySQL shell Group Replication ( GR ) MySQL Router å®‰è£…è®¡åˆ’ æœåŠ¡å™¨è§„åˆ’
IPåœ°å€ SSH ç«¯å£ SSH ç”¨æˆ·å SSH å¯†ç  ROOT å¯†ç  OS 10.1.207.180 22022 mysql 123456 root123 CentOS Linux release 7.9.2009 10.1.207.181 22022 mysql 123456 root123 CentOS Linux release 7.9.2009 10.</description></item><item><title>Automate Install Elasticsearch Cluster with Ansible Playbook</title><link>https://coolbeevip.github.io/posts/ansible/ansible-elasticsearch-cluster/</link><pubDate>Sun, 07 Nov 2021 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/ansible/ansible-elasticsearch-cluster/</guid><description>é›†ç¾¤æ¦‚è¿° è„šæœ¬ä¼šåœ¨æ­¤ç”¨æˆ·ä¸‹å®‰è£…ä¸‰èŠ‚ç‚¹é›†ç¾¤ï¼Œå› ä¸º 7.X ç‰ˆæœ¬åä¼šè‡ªå¸¦ JDKï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦æå‰å®‰è£… Java ç¯å¢ƒã€‚
å®‰è£…è®¡åˆ’ æœåŠ¡å™¨è§„åˆ’
IPåœ°å€ SSH ç«¯å£ SSH ç”¨æˆ·å SSH å¯†ç  ROOT å¯†ç  OS 10.1.207.180 22022 elasticsearch 123456 root123 CentOS Linux release 7.9.2009 10.1.207.181 22022 elasticsearch 123456 root123 CentOS Linux release 7.9.2009 10.1.207.182 22022 elasticsearch 123456 root123 CentOS Linux release 7.9.2009 æç¤ºï¼š å¯ä»¥å‚è€ƒæ‰¹é‡è‡ªåŠ¨åŒ–åˆ›å»ºç”¨æˆ·
é›†ç¾¤èŠ‚ç‚¹è§„åˆ’
IPåœ°å€ Elasticsearch 10.</description></item><item><title>Linux Command - Grep</title><link>https://coolbeevip.github.io/posts/linux/linux-commands-search/</link><pubDate>Sun, 07 Nov 2021 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/linux/linux-commands-search/</guid><description>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æœç´¢æ–‡ä»¶å†…å®¹ macOS
cat nc-auth_3000.log | grep -s &amp;#39;timeCost&amp;#34;:\d\d\d\d&amp;#39; centOS
cat nc-auth_3000.log | grep -P &amp;#39;timeCost&amp;#34;:\d\d\d\d&amp;#39; ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æœç´¢å‹ç¼©æ–‡ä»¶å†…å®¹ macOS
gzip -dc nc-auth_3000.20211106.38.log.gz | grep -s &amp;#39;timeCost&amp;#34;:\d\d\d\d&amp;#39; centOS
gzip -dc nc-auth_3000.20211106.38.log.gz | grep -P &amp;#39;timeCost&amp;#34;:\d\d\d\d&amp;#39;</description></item><item><title>The Impact of Undertow Thread Options &amp; Database Connection Pool on Performance</title><link>https://coolbeevip.github.io/posts/java/java-undertow-threads-and-jdbc-pools/</link><pubDate>Thu, 23 Sep 2021 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/java/java-undertow-threads-and-jdbc-pools/</guid><description>Hikari çº¿ç¨‹å‚æ•°å’Œæ•°æ®åº“è¿æ¥æ± å‚æ•°å¯¹ä¸šåŠ¡ååç‡çš„å½±å“åˆ†æ
åœºæ™¯ æœ¬ä¾‹ä¸­æˆ‘ä»¬ä½¿ç”¨ Undertow ä½œä¸º Web å®¹å™¨ï¼Œä½¿ç”¨ Hikari ä½œä¸ºæ•°æ®åº“è¿æ¥æ± ï¼Œ å¹¶é€šè¿‡ spring.datasource.hikari.maximum-pool-size å’Œ server.undertow.threads.worker ä¸¤ä¸ªå‚æ•°çš„è°ƒæ•´ï¼Œçœ‹çœ‹å¯¹äºä¸šåŠ¡çš„æ€§èƒ½å½±å“æœ‰å¤šå¤§
ä¸ºæ­¤æˆ‘å‡†å¤‡äº†ä¸€ä¸ªç®€å•çš„ DEMOï¼Œå¹¶ä¸”æ‰§è¡Œ 1000 æ¬¡è¯·æ±‚ï¼Œå¹¶å‘ 100ï¼Œæ¯æ¬¡è¯·æ±‚æ‰§è¡Œä¸€ä¸ª SLEEP(5) çš„ SQLæ¨¡æ‹Ÿå•ç¬”è€—æ—¶ã€‚å¹¶åœ¨ä¸€ä¸ª 2C çš„æœåŠ¡å™¨ä¸Šæµ‹è¯•ã€‚åº”ç”¨é»˜è®¤å‚æ•°å¦‚ä¸‹
spring.datasource.hikari.connection-timeout=30000 spring.datasource.hikari.minimum-idle=10 spring.datasource.hikari.maximum-pool-size=10 server.undertow.threads.worker(é»˜è®¤æ˜¯ 2C*8) é»˜è®¤å‚æ•° $ ab -c 100 -n 1000 http://localhost:6060/test This is ApacheBench, Version 2.3 &amp;lt;$Revision: 1879490 $&amp;gt; Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/ Licensed to The Apache Software Foundation, http://www.apache.org/ Benchmarking localhost (be patient) Completed 100 requests Completed 200 requests Completed 300 requests Completed 400 requests Completed 500 requests Completed 600 requests Completed 700 requests Completed 800 requests Completed 900 requests Completed 1000 requests Finished 1000 requests Server Software: Server Hostname: localhost Server Port: 6060 Document Path: /test Document Length: 14 bytes Concurrency Level: 100 Time taken for tests: 510.</description></item><item><title>Find The Biggest Objects In Redis</title><link>https://coolbeevip.github.io/posts/redis/redis-find-biggest-objects-in-redis/</link><pubDate>Wed, 25 Aug 2021 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/redis/redis-find-biggest-objects-in-redis/</guid><description>åœ¨ REDIS ä¸­ä¸€ä¸ªå­—ç¬¦ä¸²æœ€å¤§512MBï¼Œä¸€ä¸ªäºŒçº§æ•°æ®ç»“æ„ï¼ˆä¾‹å¦‚hashã€listã€setã€zsetï¼‰å¯ä»¥å­˜å‚¨å¤§çº¦40äº¿ä¸ª(2^32-1)ä¸ªå…ƒç´ ï¼Œä½†å®é™…ä¸Šä¸­å¦‚æœä¸‹é¢ä¸¤ç§æƒ…å†µï¼Œæˆ‘å°±ä¼šè®¤ä¸ºå®ƒæ˜¯ bigkeysã€‚
å­—ç¬¦ä¸²ç±»å‹ï¼šå•ä¸ª value è¶…è¿‡5MB å“ˆå¸Œã€åˆ—è¡¨ã€é›†åˆã€æœ‰åºé›†åˆå…ƒç´ å¯æ•°è¶…è¿‡ 10000 å› ä¸º REDIS æ˜¯å•è¿›ç¨‹å¤„ç†ï¼Œæ‰€ä»¥å¯¹ BIGKEY çš„è®¿é—®ä¼šäº§ç”Ÿé˜»å¡ï¼Œå¦‚æœä½ è·å– 100 æ¬¡å•ä½“å¤§å°ä¸º 5MB çš„ KEYï¼Œé‚£ä¹ˆè¿™äº›æ•°æ®ï¼ˆ500MBï¼‰ä¼ è¾“åˆ°å®¢æˆ·ç«¯å°±éœ€è¦ä¸€å®šçš„æ—¶é—´ï¼Œè¿™æœŸé—´å…¶ä»–å‘½ä»¤éƒ½è¦æ’é˜Ÿç­‰å¾…ã€‚
æŸ¥æ‰¾ BIGKEY ä½¿ç”¨ bigkeys å‘½ä»¤å¯ä»¥ç»Ÿè®¡å¤§å¯¹è±¡ï¼ˆå»ºè®®åœ¨ä»ç»“ç‚¹æ‰§è¡Œï¼‰ï¼Œä¸ºäº†æ–¹å¼é˜»å¡ï¼Œæˆ‘ä»¬è®¾ç½®ä¸€ä¸ªä¼‘çœ å‚æ•° -i 0.1
redis-cli -h &amp;lt;ip&amp;gt; -p &amp;lt;port&amp;gt; -a &amp;lt;password&amp;gt; --bigkeys -i 0.1 ç»“æœå¦‚ä¸‹ï¼š
$ redis-cli -h 192.168.51.207 -p 9015 --bigkeys Warning: Using a password with &amp;#39;-a&amp;#39; or &amp;#39;-u&amp;#39; option on the command line interface may not be safe. # Scanning the entire keyspace to find biggest keys as well as # average sizes per key type.</description></item><item><title>Multiple SSH Keys Settings For Different Git Platform[Githubã€Gitlab]</title><link>https://coolbeevip.github.io/posts/git/git-multiple-ssh-keys/</link><pubDate>Sun, 22 Aug 2021 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/git/git-multiple-ssh-keys/</guid><description>æˆ‘ä»¬åœ¨ä½¿ç”¨ Githubã€Gitlab æˆ–è€… JetBrains Space æ—¶é€šå¸¸ä½¿ç”¨ SSH å¯†é’¥å¯ä»¥è¿æ¥ Git æœåŠ¡ï¼Œè€Œæ— éœ€åœ¨æ¯æ¬¡è®¿é—®æ—¶éƒ½æä¾›ç”¨æˆ·åå’Œä¸ªäººè®¿é—®ä»¤ç‰Œã€‚ å¦å¤–ç°åœ¨å¤§é‡å¹³å°å¯ç”¨è´¦æˆ·ç™»å½•å¤šæ¬¡éªŒè¯ï¼Œä¹Ÿä¿ƒè¿›æˆ‘ä»¬é¿å…ä½¿ç”¨è´¦å·å¯†ç ç™»å½•ã€‚
ä¸ºäº†ä¾¿äºç®¡ç†æˆ‘ä»¬é€šå¸¸ä¼šä¸ºæ¯ä¸ª Git å¹³å°é…ç½®ä¸åŒçš„ SSH KEYï¼Œç„¶åé€šè¿‡ ~/.ssh/config é…ç½®æ¯ä¸ªå¹³å°å¯¹åº”çš„ SSH KEYã€‚
åˆ›å»ºå¤šä¸ª SSH KEY ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤åˆ›å»º id_githubï¼Œæ³¨æ„æç¤ºè¾“å…¥æ–‡ä»¶åæ—¶è¯·ä¿®æ”¹æˆ id_github
ssh-keygen -t ed25519 -C &amp;#34;coolbeevip@github.com&amp;#34; ä½¿ç”¨åŒæ ·çš„æ–¹æ³•æˆ‘ä»¬åˆ†åˆ«åˆ›å»º id_gitlab å’Œ id_githubï¼Œè¿™æ—¶åœ¨çš„æœ¬åœ°çš„ ~/.ssh ç›®å½•ä¸‹ä¼šå¾—åˆ°å¦‚ä¸‹æ–‡ä»¶
id_githubã€id_github.pub id_gitlabã€id_gitlab.pub å°† *.pub æ–‡ä»¶å†…å®¹åˆ†åˆ«å¯¼å…¥åˆ° Git æœåŠ¡ä¸­ï¼Œè¯¦ç»†æ–¹å¼è¯·å‚è€ƒ Github and SSH keys ã€ GitLab and SSH keys æˆ– JetBrains Space and SSH keys
é…ç½® SSH ç¼–è¾‘ ~/.ssh/config æ–‡ä»¶ä¸ºæ¯ä¸ª Git åœ°å€é…ç½®ä¸åŒçš„ KEY
Host github.</description></item><item><title>Approximate Counting Morris Algorithm in Java</title><link>https://coolbeevip.github.io/posts/algorithm/algorithm-morris-approximate-counter/</link><pubDate>Sun, 22 Aug 2021 00:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/algorithm/algorithm-morris-approximate-counter/</guid><description>è¿™æ˜¯ä¸€ä¸ª Morris è®¡æ•°å™¨ï¼ˆè¿‘ä¼¼è®¡æ•°ç®—æ³•ï¼‰çš„ Java å®ç°ï¼Œç”¨å¾ˆå°çš„æ•°æ®ç»“æ„å‡†ç¡®ä¼°è®¡å…·æœ‰å‡ åäº¿æ•°æ®é‡çš„æ•°æ®è®¡æ•°ã€‚ æˆ‘ä»¬é€šå¸¸ä¼šå®šä¹‰ä¸€ä¸ª Long ç±»å‹å¯¹è±¡ï¼Œé€šè¿‡ç´¯åŠ çš„æ–¹å¼å®ç°è®¡æ•°ã€‚æ¯ä¸ª Long ç±»å‹å ç”¨ 8 byte (64bit) ç©ºé—´ï¼Œå¦‚æœä½ æœ‰ 30 äº¿ä¸ªè¦è®°å½•çš„å¯¹è±¡ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦ 22GB çš„ç©ºé—´å­˜å‚¨è¿™äº›è®¡æ•°å™¨ï¼Œè¿™è¿˜ä¸ä¸åŒ…æ‹¬åœ¨å“ˆå¸Œä¸­çš„å¯¹è±¡IDã€‚
èƒŒæ™¯ è¿‘ä¼¼è®¡æ•°ç®—æ³•æ˜¯å…è®¸æˆ‘ä»¬ä½¿ç”¨éå¸¸å°‘é‡çš„å†…å­˜å¯¹å¤§é‡äº‹ä»¶è¿›è¡Œè®¡æ•°çš„æŠ€æœ¯ã€‚å®ƒç”± Robert Morris äº 1977 å¹´å‘æ˜ã€‚ è¯¥ç®—æ³•ä½¿ç”¨æ¦‚ç‡æŠ€æœ¯æ¥å¢åŠ è®¡æ•°å™¨ï¼Œå°½ç®¡å®ƒä¸èƒ½ä¿è¯å‡†ç¡®æ€§ï¼Œä½†å®ƒç¡®å®æä¾›äº†å¯¹çœŸå®å€¼çš„ç›¸å½“å¥½çš„ä¼°è®¡ï¼ŒåŒæ—¶å¼•å…¥äº†æœ€å°ä½†ç›¸å½“æ’å®šçš„ç›¸å¯¹è¯¯å·®ã€‚ åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬è¯¦ç»†ä»‹ç»äº† Morris ç®—æ³•åŠå…¶èƒŒåçš„æ•°å­¦åŸç†ã€‚
Morris åœ¨è´å°”å®éªŒå®¤å·¥ä½œæ—¶é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ã€‚ä»–åº”è¯¥ç¼–å†™ä¸€æ®µä»£ç æ¥è®¡ç®—å¤§é‡äº‹ä»¶ï¼Œè€Œä»–åªæœ‰ä¸€ä¸ª 8 ä½è®¡æ•°å™¨ã€‚ ç”±äºäº‹ä»¶çš„æ•°é‡å¾ˆå®¹æ˜“è¶…è¿‡ 256ï¼Œä½¿ç”¨æ™®é€šæ–¹æ³•è®¡ç®—å®ƒä»¬æ˜¯ä¸å¯è¡Œçš„ï¼Œè¿™ç§é™åˆ¶å¯¼è‡´ä»–æ„å»ºäº†è¿™ä¸ªè¿‘ä¼¼è®¡æ•°å™¨ï¼Œå®ƒä¸æ˜¯æä¾›ç²¾ç¡®è®¡æ•°ï¼Œè€Œæ˜¯æä¾›ä¸€ä¸ªè¿‘ä¼¼è®¡æ•°ã€‚
è®¡æ•°å’ŒæŠ•ç¡¬å¸ æ„å»ºè¿‘ä¼¼è®¡æ•°å™¨çš„ä¸€ä¸ªç®€å•æ–¹æ¡ˆæ˜¯å¯¹æ¯æ¬¡äº‹ä»¶å˜æ¢è¿›è¡Œè®¡æ•°ã€‚æ¯æ”¶åˆ°ä¸€ä¸ªæ–°äº‹ä»¶ï¼Œæˆ‘ä»¬æŠ›ä¸€æ¬¡ç¡¬å¸ï¼Œå¦‚æœæ­£é¢æœä¸Šï¼Œæˆ‘ä»¬å¢åŠ è®¡æ•°ï¼Œå¦åˆ™ä¸å¢åŠ ã€‚ è¿™æ ·è®¡æ•°å™¨ä¸­çš„å€¼å¹³å‡ä¸‹æ¥å°†ä»£è¡¨æ€»äº‹ä»¶çš„ä¸€åŠï¼ˆå› ä¸ºæŠ›ç¡¬å¸çš„è·å¾—æ­£é¢å¹¶çš„æ¦‚ç‡æ˜¯ 0.5ï¼‰ã€‚å½“æˆ‘ä»¬å°†è®¡æ•°ä¹˜ä»¥ 2 æ—¶ï¼Œæˆ‘ä»¬å°†å¾—åˆ°è¿‘ä¼¼å®é™…æ•°é‡çš„è®¡æ•°ã€‚
CoinFlipsCounter.java
è¿™ç§åŸºäºæŠ›ç¡¬å¸çš„è®¡æ•°æŠ€æœ¯æ˜¯å‚æ•°ä¸º (n, p) çš„äºŒé¡¹åˆ†å¸ƒï¼Œå…¶ä¸­ n æ˜¯æ‰€è§äº‹ä»¶çš„æ€»æ•°ï¼Œp æ˜¯æˆåŠŸæ¦‚ç‡ï¼Œå³åœ¨æŠ›ç¡¬å¸è¿‡ç¨‹ä¸­å‡ºç°æ­£é¢çš„æ¦‚ç‡ã€‚å¯¹çœŸå®äº‹ä»¶æ•° n çš„è®¡æ•°å€¼ v ç”±ä¸‹å¼ç»™å‡º
$$ \large ä¼°ç®—å€¼v = å®é™…å€¼n * æ¦‚ç‡p = å®é™…å€¼n/2 $$
è¿™ç§äºŒé¡¹å¼çš„æ­£æ€åˆ†å¸ƒæ ‡å‡†åå·®å°†å¸®åŠ©æˆ‘ä»¬æ‰¾åˆ°ä¼°ç®—ä¸­çš„è¯¯å·®ï¼Œå¯¹äºæ­£æ€åˆ†å¸ƒå¹³å‡å€¼ä¸¤ä¾§æ ‡å‡†å·®çš„ä¸¤å€è¦†ç›–äº†åˆ†å¸ƒçš„ 95%ï¼›æˆ‘ä»¬ä½¿ç”¨å®ƒæ¥æŸ¥æ‰¾è®¡æ•°å™¨å€¼ä¸­çš„ç›¸å¯¹å’Œç»å¯¹è¯¯å·®ã€‚
$$ \large è¯¯å·® = \sqrt{å®é™…å€¼n * æ¦‚ç‡p(1-æ¦‚ç‡p)} = \sqrt{ä¼°ç®—å€¼v/2} $$</description></item><item><title>GraphQL Tools Schema Parser</title><link>https://coolbeevip.github.io/posts/graphql-tools-schema-paarser-slow/</link><pubDate>Sat, 29 May 2021 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/graphql-tools-schema-paarser-slow/</guid><description>SYSTEM
MacBook Pro 16G
JVM
-Xmx4g -Xms4g -Xss256k -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=512m -Xnoclassgc -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:ParallelGCThreads=12 -XX:MaxTenuringThreshold=15 -XX:+ExplicitGCInvokesConcurrent -XX:+CMSParallelRemarkEnabled -XX:SurvivorRatio=8 -XX:CMSInitiatingOccupancyFraction=65 -XX:+UseCMSInitiatingOccupancyOnly -XX:+UseCMSCompactAtFullCollection -XX:+CMSClassUnloadingEnabled -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=10 CPU Flame Graph
GrpaphQL Schema Parser
Slow Method</description></item><item><title>APISIX Study Notes (1) Build &amp; QuickStart</title><link>https://coolbeevip.github.io/posts/apisix/study-notes-for-apisix-1-quickstart/</link><pubDate>Fri, 21 May 2021 01:00:00 +0800</pubDate><guid>https://coolbeevip.github.io/posts/apisix/study-notes-for-apisix-1-quickstart/</guid><description>å®‰è£… åœ¨ macOS åŸºäºæºä»£ç è‡ªå·±ç¼–è¯‘å‘å¸ƒç‰ˆæœ¬
å®‰è£… Etcd å¯åŠ¨ apisix-etcd.yml
version: &amp;#39;3.2&amp;#39; services: etcd-1: image: docker.io/bitnami/etcd:3.4.16 hostname: etcd container_name: apisix-etcd ports: - &amp;#39;2380:2380&amp;#39; - &amp;#39;2379:2379&amp;#39; environment: - ALLOW_NONE_AUTHENTICATION=yes - ETCD_NAME=etcd-1 - ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 - ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379 - ETCD_ADVERTISE_CLIENT_URLS=http://0.0.0.0:2379 volumes: - ./volume/apisix/etcd/data:/bitnami/etcd/data - ./volume/apisix/etcd/conf:/opt/bitnami/etcd/conf docker-compose -f docker-compose-apisix-etcd.yml up -d éªŒè¯ $ curl -L http://127.0.0.1:2379/health {&amp;#34;health&amp;#34;:&amp;#34;true&amp;#34;} å®‰è£…ç¼–è¯‘ç¯å¢ƒ å®‰è£… Node 10.</description></item><item><title>APISIX Study Notes (2) Plugins Traffic Split</title><link>https://coolbeevip.github.io/posts/apisix/study-notes-for-apisix-2-plugins-traffic-split/</link><pubDate>Fri, 21 May 2021 01:00:00 +0800</pubDate><guid>https://coolbeevip.github.io/posts/apisix/study-notes-for-apisix-2-plugins-traffic-split/</guid><description>åœºæ™¯æè¿° æˆ‘æœ‰ä¸¤ä¸ª UPSTREAM æœåŠ¡:
UPSTREAM 1 $ curl -i -X GET http://192.168.51.234:5005/nc-tools/actuator/health HTTP/1.1 200 OK Connection: keep-alive Transfer-Encoding: chunked Content-Type: application/vnd.spring-boot.actuator.v3+json Date: Sat, 22 May 2021 09:09:29 GMT {&amp;#34;status&amp;#34;:&amp;#34;UP&amp;#34;,&amp;#34;components&amp;#34;:{...}} UPSTREAM 2 $ curl -i -X GET http://10.19.88.60:5005/nc-tools/actuator/health HTTP/1.1 200 OK Connection: keep-alive Transfer-Encoding: chunked Content-Type: application/vnd.spring-boot.actuator.v3+json Date: Sat, 22 May 2021 09:08:12 GMT {&amp;#34;status&amp;#34;:&amp;#34;UP&amp;#34;,&amp;#34;components&amp;#34;:{...}} æˆ‘å¸Œæœ›é€šè¿‡ APISIX å°†è¯·æ±‚æµé‡è·¯ç”±åˆ°ä¸¤ä¸ªä¸åŒçš„ UPSTREAM æœåŠ¡ä¸Šï¼Œå‚è€ƒæ’ä»¶ traffic-split çš„æ ·ä¾‹ï¼Œå¯ä»¥å®ç°æ­¤åŠŸèƒ½
é…ç½®è·¯ç”± &amp;amp; traffic-split æœ¬ä¾‹ä¸­å¹¶æ²¡æœ‰å•ç‹¬å®šä¹‰ UPSTREAMï¼Œè€Œæ˜¯åœ¨ traffic-split ä¸­ç›´æ¥å®šä¹‰äº† UPSTREAM çš„åœ°å€</description></item><item><title>APISIX Study Notes (3) Install with Docker</title><link>https://coolbeevip.github.io/posts/apisix/study-notes-for-apisix-3-install-with-docker/</link><pubDate>Fri, 21 May 2021 01:00:00 +0800</pubDate><guid>https://coolbeevip.github.io/posts/apisix/study-notes-for-apisix-3-install-with-docker/</guid><description>ä½¿ç”¨ Docker å¯åŠ¨
å®šä¹‰å·ç›®å½• APISIX ç›®å‰å¥½åƒè¿˜ä¸æ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡é…ç½®å‚æ•°ï¼Œæ‰€ä»¥éœ€è¦åœ¨å®¿ä¸»æœºä¸Šåˆ›å»ºé…ç½®æ–‡ä»¶ï¼Œå¹¶åœ¨å¯åŠ¨ Docker æ—¶é€šè¿‡ Volume æ˜ å°„è¿›å®¹å™¨
è§„åˆ’å¤–éƒ¨å·ç›®å½•
mkdir apisix_home mkdir -p apisix_home/apisix_volume/apisix/apisix_conf mkdir -p apisix_home/apisix_volume/apisix/dashboard_conf å®šä¹‰ APISIX Dashboard é…ç½®æ–‡ä»¶ apisix_home/apisix_volume/apisix/dashboard_conf/conf.yaml
conf: listen: # ç»‘å®š IP åœ°å€ host: 0.0.0.0 # ç›‘å¬ç«¯å£ port: 9000 etcd: # etcd ç”¨æˆ·å # username: &amp;#34;root&amp;#34; # etcd å¯†ç  # password: &amp;#34;123456&amp;#34; # etcd åœ°å€ï¼Œæ”¯æŒé›†ç¾¤å¤šèŠ‚ç‚¹å®šä¹‰ endpoints: - apisix-etcd:2379 log: error_log: # æ—¥å¿—çº§åˆ« debug, info, warn, error, panic, fatal level: warn # æ—¥å¿—è¾“å‡ºè·¯å¾„ file_path: logs/error.</description></item><item><title>APISIX Study Notes (4) Plugins Proxy Rewrite</title><link>https://coolbeevip.github.io/posts/apisix/study-notes-for-apisix-4-plugins-proxy-rewrite/</link><pubDate>Fri, 21 May 2021 01:00:00 +0800</pubDate><guid>https://coolbeevip.github.io/posts/apisix/study-notes-for-apisix-4-plugins-proxy-rewrite/</guid><description>åœ¨ APISIX STUDY NOTES (2) PLUGINS TRAFFIC SPLIT æåˆ°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªæ’ä»¶å®ç°ä¸Šæ¸¸æœåŠ¡çš„å¯¼æµï¼Œä½†æ˜¯è¿™ä¸ªæ’ä»¶åªèƒ½é€šè¿‡è‡ªå®šä¹‰ URLå‚æ•° æˆ–è€… REQUEST HEADER çš„æ–¹å¼ä¼ é€’å¯¼æµå˜é‡ã€‚å¦‚æœæˆ‘ä»¬æƒ³é€šè¿‡ URL PATH çš„æ–¹å¼å®ç°ä¸Šæ¸¸ä¸šåŠ¡çš„åˆ°å¯¼æµï¼Œå¯ä»¥ä½¿ç”¨ Proxy Rewrite æ’ä»¶
åœºæ™¯æè¿° æˆ‘æœ‰ä¸¤ä¸ª UPSTREAM æœåŠ¡:
UPSTREAM 1 $ curl -i -X GET http://192.168.51.234:5005/nc-tools/actuator/health HTTP/1.1 200 OK Connection: keep-alive Transfer-Encoding: chunked Content-Type: application/vnd.spring-boot.actuator.v3+json Date: Sat, 22 May 2021 09:09:29 GMT {&amp;#34;status&amp;#34;:&amp;#34;UP&amp;#34;,&amp;#34;components&amp;#34;:{...}} UPSTREAM 2 $ curl -i -X GET http://10.19.88.60:5005/nc-tools/actuator/health HTTP/1.1 200 OK Connection: keep-alive Transfer-Encoding: chunked Content-Type: application/vnd.</description></item><item><title>Bash script automates the Maven project Git release process</title><link>https://coolbeevip.github.io/posts/git/git-automate-tag-release-process-with-bash/</link><pubDate>Sun, 16 May 2021 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/git/git-automate-tag-release-process-with-bash/</guid><description>å¼€æºé¡¹ç›®ä¸­æˆ‘ä»¬å¤§å¤šé‡‡ç”¨ä¸»å¹²å¼€å‘æ¨¡å¼ç®¡ç†æˆ‘ä»¬çš„é¡¹ç›®ï¼Œä»–åŸºæœ¬éµå¾ªä»¥ä¸‹è§„åˆ™
æ‰€æœ‰çš„ PR éƒ½é»˜è®¤å‘ä¸»å¹²åˆå¹¶ ä¸»å¹²ä¸Šé¡¹ç›®çš„ç‰ˆæœ¬å·æ˜¯ -SNAPSHOT å½“ä¸»å¹²è¦å‘å¸ƒæ—¶ï¼Œæˆ‘ä»¬ä¼šå»ºç«‹ä¸ä¹‹å¯¹åº”çš„ X åˆ†æ”¯ï¼ˆæ­¤åˆ†æ”¯çš„ç›®çš„æ˜¯ä¸ºäº†åŸºäºæ­¤åˆ†æ”¯å‘å¸ƒè¡¥ä¸ç‰ˆæœ¬ï¼‰ åŸºäºå½“å‰ä¸»å¹²å»é™¤ç‰ˆæœ¬å·ä¸­çš„ -SNAPSHOT åå»ºç«‹ä¸ç‰ˆæœ¬å¯¹åº”çš„ TAG å°†ä¸»å¹²ä¸Šçš„ç‰ˆæœ¬å·ä¸­çš„ minor ç´¯åŠ ä¸€ï¼Œå¹¶åœ¨åè¾¹å¢åŠ  -SNAPSHOT åç¼€ æ­¤è¿‡ç¨‹ç¹çï¼Œåˆ‡å®¹æ˜“å‡ºé”™ã€‚æˆ‘åˆ¶ä½œäº†ä¸€ä¸ªè„šæœ¬ maven-project-git-release.sh ç”¨æ¥å®ç°è¿™ä¸ªè¿‡ç¨‹çš„è§„èŒƒåŒ–å’Œè‡ªåŠ¨åŒ–
å½“ç„¶ï¼Œè¿™å¹¶ä¸æ„å‘³ç€ä½ ä¸éœ€è¦æŒæ¡æ­£æ‰‹åŠ¨å‘å¸ƒçš„è¿‡ç¨‹ã€‚
ç”±äºæŸç§åŸå› å¯¼è‡´è‡ªåŠ¨è¿‡ç¨‹ä¸­æ–­åï¼Œä½ ä¾ç„¶éœ€è¦æ‰‹åŠ¨å»å¤„ç†ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨è¿™ä¸ªè„šæœ¬å‰ï¼Œè¯·ç¡®ä¿ä½ äº†è§£è¿™ä¸ªè„šæœ¬å¸®ä½ åšäº†ä»€ä¹ˆå·¥ä½œï¼Œä»¥åŠå¦‚ä½•åšçš„ã€‚
å¦‚ä½•ä½¿ç”¨ maven-project-git-release.sh è„šæœ¬ä¼šå¸®ä½ è‡ªåŠ¨åŒ–ä»¥ä¸‹å·¥ä½œ
åˆ›å»ºä¸€ä¸ªç¼–è¯‘ç”¨çš„ç›®å½•
ç›®å½•ä¼šåˆ›å»ºåœ¨ä½ ç³»ç»Ÿçš„ä¸´æ—¶ç›®å½•ä¸‹ï¼Œåœ¨æˆ‘çš„ Mac ç³»ç»Ÿç³»ç»Ÿä¸­çœ‹èµ·æ¥åƒ /var/folders/fd/gqdh88px2fj66tmtcy6ffr580000gn/T
åœ¨ç¼–è¯‘ç”¨çš„ç›®å½•ä¸­ git clone ä½ çš„ä»“åº“ä»£ç 
ä½ çš„ä»“åº“åœ°å€åœ¨ä½¿ç”¨è„šæœ¬æ—¶é€šè¿‡å‚æ•°æŒ‡å®šï¼Œåƒè¿™æ · sh maven-project-git-release.sh git@github.com:coolbeevip/license-maven-plugin.git
ç¼–è¯‘ä½ çš„ä»£ç ç¡®ä¿æ­£ç¡®
é»˜è®¤åœ¨å½“å‰ä»“åº“æ ¹ç›®å½•ä¸‹æ‰§è¡Œ mvn clean packageï¼Œå¦‚æœä½ éœ€è¦ç‰¹æ®Šçš„æ–¹å¼ï¼Œå¯ä»¥ä¿®æ”¹è„šæœ¬ä¸­çš„ check_source_before_release å‡½æ•°
è®¡ç®—ç‰ˆæœ¬å·åˆ†æ”¯å
æ ¹æ® pom ä¸­çš„ç‰ˆæœ¬å®šä¹‰ï¼Œè‡ªåŠ¨è®¡ç®—ä¸‹ä¸€ç‰ˆæœ¬å·ï¼Œé»˜è®¤é‡‡ maven çš„3æ®µå¼ç‰ˆå·æ–¹å¼ major.minor.patchï¼Œå¹¶ä»¥æ­¤ä¸ºåŸºå‡†æ»šåŠ¨ minor ç‰ˆæœ¬å·ï¼Œå¦‚æœä½ éœ€è¦ç‰¹æ®Šçš„æ–¹å¼ï¼Œå¯ä»¥ä¿®æ”¹è„šæœ¬ä¸­çš„ next_version å‡½æ•°
è¾“å‡ºå‘å¸ƒè®¡åˆ’</description></item><item><title>JProfiler with Docker Sonatype Nexus3</title><link>https://coolbeevip.github.io/posts/docker/jprofiler-with-docker/</link><pubDate>Fri, 14 May 2021 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/docker/jprofiler-with-docker/</guid><description>ä½¿ç”¨ JProfiler ç›‘æ§ Docker Sonatype Nexus3
ä¸‹è½½ JProfiler ä» https://www.ej-technologies.com/ä¸‹è½½ JProfiler å’Œ Agentï¼ˆæ³¨æ„ç‰ˆæœ¬å¿…é¡»ä¸€è‡´ï¼‰
JProfiler GUI
https://download-gcdn.ej-technologies.com/jprofiler/jprofiler_macos_12_0_2.dmg
JProfiler Agent
https://download-gcdn.ej-technologies.com/jprofiler/jprofiler_linux_12_0_2.sh
åœ¨æœåŠ¡å™¨ä¸Šå®‰è£… JProfiler Agent å°†ä¸‹è½½åçš„ jprofiler_linux_12_0_2.sh ä¼ åˆ°æœåŠ¡å™¨ä¸Šï¼Œé€šè¿‡ sh jprofiler_linux_12_0_2.sh å‘½ä»¤æŒ‰æç¤ºå®‰è£…å³å¯
é»˜è®¤å®‰è£…è·¯å¾„ä¸º /opt/jprofiler12/ï¼Œè¿™ä¸ªè·¯å¾„åœ¨å¯åŠ¨ Docker çš„æ—¶å€™è¦æ˜ å°„åˆ°å®¹å™¨å†…éƒ¨
å¯åŠ¨ Docker Sonatype Nexus3 åœ¨å®˜æ–¹ sonatype/nexus3 å®¹å™¨å¯åŠ¨å‚æ•°çš„åŸºç¡€ä¸Šåšå¦‚ä¸‹ä¿®æ”¹
ä½¿ç”¨ -v /opt/jprofiler12:/opt/jprofiler12 å°† jprofiler è·¯å¾„æ˜ å°„åˆ°å®¹å™¨å†…éƒ¨
å¢åŠ  -agentpath:/opt/jprofiler12/bin/linux-x64/libjprofilerti.so=port=9899 JVM å‚æ•°ï¼Œè®¾ç½®ç›‘å¬ç«¯å£ä¸º 9899
å¢åŠ  -p 9899:9899 å®¹å™¨ç«¯å£æ˜ å°„
docker run -d \ -e NEXUS_CONTEXT=nexus \ -e INSTALL4J_ADD_VM_PARAMS=&amp;#34;-Xms10g -Xmx10g \ -agentpath:/opt/jprofiler12/bin/linux-x64/libjprofilerti.</description></item><item><title>Securing Docker ports with firewalld</title><link>https://coolbeevip.github.io/posts/docker/securing-docker-ports-with-firewalld/</link><pubDate>Tue, 11 May 2021 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/docker/securing-docker-ports-with-firewalld/</guid><description>æ¦‚è¿° ä¸ºäº†ä¿æŠ¤ Docker æš´éœ²çš„ç«¯å£ä¸å—å¤–éƒ¨è®¿é—®çš„å½±å“ï¼Œå¯ä»¥ä½¿ç”¨ firewalld é…ç½®é˜²ç«å¢™è§„åˆ™ï¼Œåªå…è®¸ç‰¹å®šçš„ IP è®¿é—®ã€‚ é€šè¿‡è®© firewalld åˆ›å»º DOCKER-USER é“¾ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ç”± firewalld ç»´æŠ¤çš„å®‰å…¨ Docker ç«¯å£, Docker å¤„ç† iptables è§„åˆ™ä»¥æä¾›ç½‘ç»œéš”ç¦»ï¼Œæ›´å¤šè¯¦ç»†
æœ¬æ–‡åŸºäºç¯å¢ƒ
Docker-CE 19.03.12 CentOS Linux release 7.8.2003 Firewall 0.6.3 æœ¬æ–‡ä¾‹å­:
æˆ‘ä»¬ä½¿ç”¨ Docker å®‰è£…ä¸€ä¸ª Nginxï¼Œå¹¶å°† 80(HTTP) ç«¯å£å¯¹å¤–æ˜ å°„ä¸º 8080ï¼Œ443(HTTPS) ç«¯å£å¯¹å¤–æ˜ å°„ä¸º 8443ï¼Œå¹¶é€šè¿‡ Firewalld ä»…å…è®¸ç‰¹å®šçš„ IP è®¿é—®ï¼›æç¤ºï¼šåç»­çš„é˜²ç«å¢™è§„åˆ™ä¸­é…ç½®çš„ç«¯å£æ˜¯å®¹å™¨å†…éƒ¨ç«¯å£ï¼Œä¾‹å¦‚ 80ï¼Œ443
192.168.51.246 å®‰è£… Nginx Docker
é…ç½® 192.168.51.245 å¯ä»¥è®¿é—® Nginx Docker
å…¶ä»–æœºå™¨æ— æ³•è®¿é—® Nginx Docker
é‡è¦çš„äº‹æƒ…è¯´ä¸‰é
å¦‚æœä½ åœ¨ Docker è¿è¡Œæ—¶é‡å¯ firewalldï¼Œé‚£ä¹ˆ firewalld å°†åˆ é™¤ DOCKER-USER</description></item><item><title>Use Maven plugin to export license info in source files and its optional dependencies</title><link>https://coolbeevip.github.io/posts/maven/maven-export-dependencies-analyse-license/</link><pubDate>Sun, 09 May 2021 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/maven/maven-export-dependencies-analyse-license/</guid><description>æœ‰çš„æ—¶å€™æˆ‘ä»¬é‚£éœ€è¦åˆ†æå¤šæ¨¡å— Maven é¡¹ç›®çš„ä¾èµ–ä½¿ç”¨æƒ…å†µï¼Œå¹¶å¸Œæœ›èƒ½å¤Ÿåˆ†æå‡ºè¿™äº›ä¾èµ–çš„ LICENSE ä¿¡æ¯ã€‚ä½¿ç”¨ io.github.coolbeevip:license-maven-plugin æ’ä»¶ å¯ä»¥ç”Ÿæˆ TXT æˆ–è€… CSV æ ¼å¼çš„åˆ†ææŠ¥å‘Š
youtube
bilibili
CSV æ ¼å¼çš„æŠ¥å‘Š NOTICE.CSV NOTICE-LICENSE.CSV TXT æ ¼å¼çš„æŠ¥å‘Š NOTICE.TXT NOTICE-LICENSE.TXT æ’ä»¶ LICENSE-MAVEN-PLUGIN format å¯¼å‡ºæ ¼å¼ï¼Œæ”¯æŒ csvã€txtï¼› license æ˜¯å¦åˆ†æ LICENSE ä¿¡æ¯ï¼Œé»˜è®¤ falseï¼› ignoreGroupIds å¿½ç•¥ groupId åˆ—è¡¨, å¤šä¸ªç”¨é€—å·åˆ†å‰²; timeout åˆ†æ LICENSE çš„è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤ 5 ç§’; å¯¼å‡ºæŠ¥å‘Š åœ¨ Maven é¡¹ç›®çš„æ ¹ç›®å½•æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤
å¯¼å‡º CSV
mvn io.github.coolbeevip:license-maven-plugin:1.5.0:dependency-license-export -Dformat=csv å¯¼å‡º TXT
mvn io.github.coolbeevip:license-maven-plugin:1.5.0:dependency-license-export -Dformat=txt æç¤ºï¼š å¯¼å‡ºçš„æŠ¥å‘Šä½ç½®åœ¨ ./target/distribute ç›®å½•ä¸‹
å¯¼å‡ºæŠ¥å‘Š(å¿½ç•¥éƒ¨åˆ†ä¾èµ–) mvn io.github.coolbeevip:license-maven-plugin:1.5.0:dependency-license-export -Dformat=csv -DignoreGroupIds=org.</description></item><item><title>Synchronize between image repositories with Bash</title><link>https://coolbeevip.github.io/posts/docker/docker-pulling-pushing/</link><pubDate>Mon, 19 Apr 2021 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/docker/docker-pulling-pushing/</guid><description>ä»æºé•œåƒä»“åº“æ‰¹é‡æ‹‰å–é•œåƒï¼Œå¹¶å°†è¿™äº›é•œåƒæ¨é€åˆ°ç›®æ ‡é•œåƒä»“åº“çš„æ‰¹é‡è„šæœ¬
#!/bin/bash ################################################# # ä½¿ç”¨æ–¹å¼ # ä»æºä»“åº“æ‹‰å–é•œåƒåˆ°æœ¬æœº # sh docker-images-pulling-pushing.sh pull # # å°†æœ¬æœºé•œåƒæ¨é€åˆ°ç›®çš„ä»“åº“ # sh docker-images-pulling-pushing.sh push # # æ¸…ç†æœ¬æœºçš„é•œåƒ # sh docker-images-pulling-pushing.sh clean ################################################# # æºä»“åº“åœ°å€ DOCKER_REPO_FROM= # ç›®æ ‡ä»“åº“åœ°å€ DOCKER_REPO_TO=192.168.2.2:8888/ DOCKER_REPO_TO_USER=test DOCKER_REPO_TO_PASS=Test123456 # é•œåƒå®šä¹‰ DOCKER_IMAGES=() DOCKER_IMAGES+=(postgres:9.6) DOCKER_IMAGES+=(elasticsearch:6.6.2) DOCKER_IMAGES+=(coolbeevip/servicecomb-pack) # ä»æºä»“åº“åœ°å€æ‹‰å–é•œåƒåˆ°æœ¬æœºä»“åº“ function pull(){ echo &amp;#34;Pull images from $DOCKER_REPO_FROM&amp;#34; for image in ${DOCKER_IMAGES[@]}; do docker pull $DOCKER_REPO_FROM$image done } # æœ¬æœºé•œåƒæ¨é€åˆ°ç›®çš„ä»“åº“ function push(){ docker login http://$DOCKER_REPO_TO -u $DOCKER_REPO_TO_USER -p $DOCKER_REPO_TO_PASS echo &amp;#34;Push $DOCKER_REPO_FROMto $DOCKER_REPO_TO&amp;#34; for image in ${DOCKER_IMAGES[@]}; do docker image tag $DOCKER_REPO_FROM$image $DOCKER_REPO_TO$image docker push $DOCKER_REPO_TO$image done } # æ¸…ç†æœ¬æœºæ‹‰å–åçš„é•œåƒ function clean(){ echo &amp;#34;Remove images&amp;#34; docker rmi -f $(docker images | grep $DOCKER_REPO_FROM | awk &amp;#39;{print $3}&amp;#39;) docker rmi -f $(docker images | grep $DOCKER_REPO_TO | awk &amp;#39;{print $3}&amp;#39;) } case &amp;#34;${@: -1}&amp;#34; in pull ) pull ;; clean ) clean ;; push ) push ;; esac</description></item><item><title>About</title><link>https://coolbeevip.github.io/about/</link><pubDate>Wed, 07 Apr 2021 00:00:00 +0000</pubDate><guid>https://coolbeevip.github.io/about/</guid><description>Hi, I&amp;rsquo;m ZhangLei ğŸ‘‹
Software Engineer at Beijing, China
Apache Committerã€Apache ServiceComb PMC member</description></item><item><title>Bookmarks</title><link>https://coolbeevip.github.io/bookmarks/</link><pubDate>Tue, 06 Apr 2021 00:00:00 +0000</pubDate><guid>https://coolbeevip.github.io/bookmarks/</guid><description>Some of my favorite websites/tools with excellent design and UX that I highly recommend
Apache Software Foundation ASF 3rd Party License Policy
ASF Committer Search
ASF Account Utility
ASF Mail Search
Nearby Apache People
Open Source Semantic Versioning v2.0.0 SemVer is a popular versioning scheme
Color Adobe Color
terminal.sexy
Dev Rex Transform texts with RegExp like a Pro
Regex101
RegExper - Regex Visualizer
rhein Text editor with freedom of layouting</description></item><item><title>MacOS Switch JDK</title><link>https://coolbeevip.github.io/posts/java/macos-switch-jdk/</link><pubDate>Thu, 25 Mar 2021 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/java/macos-switch-jdk/</guid><description>æŸ¥çœ‹æœ¬æœº JDK ç‰ˆæœ¬ å‘½ä»¤è¡Œè¾“å…¥ /usr/libexec/java_home -V å¯ä»¥çœ‹åˆ°å¤šä¸ª JDK ç‰ˆæœ¬
$ /usr/libexec/java_home -V Matching Java Virtual Machines (2): 11.0.10, x86_64: &amp;#34;OpenJDK 11.0.10&amp;#34; /Users/zhanglei/Library/Java/JavaVirtualMachines/adopt-openj9-11.0.10/Contents/Home 1.8.0_201, x86_64: &amp;#34;Java SE 8&amp;#34; /Library/Java/JavaVirtualMachines/jdk1.8.0_201.jdk/Contents/Home /Users/zhanglei/Library/Java/JavaVirtualMachines/adopt-openj9-11.0.10/Contents/Home æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„ JDK ç‰ˆæœ¬ $ java -version java version &amp;#34;1.8.0_201&amp;#34; Java(TM) SE Runtime Environment (build 1.8.0_201-b09) Java HotSpot(TM) 64-Bit Server VM (build 25.201-b09, mixed mode) åˆ‡æ¢ JDK åˆ‡æ¢åˆ° JDK 11.0.10 ç‰ˆæœ¬ï¼Œå¹¶æŸ¥çœ‹åˆ‡æ¢åçš„ JDK ç‰ˆæœ¬
$ export JAVA_HOME=`/usr/libexec/java_home -v 11.0.10` $ java -version openjdk version &amp;#34;11.</description></item><item><title>Oracle Proxy Using HAProxy Docker</title><link>https://coolbeevip.github.io/posts/haproxy/haproxy_oracle_proxy_using_haproxy_docker/</link><pubDate>Tue, 01 Sep 2020 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/haproxy/haproxy_oracle_proxy_using_haproxy_docker/</guid><description>ä¸‹è½½ HAProxy Docker
docker pull haproxy:2.3 åˆ›å»ºå·¥ä½œç›®å½•
mkdir -p /opt/haproxy-oracle/docker_volume åœ¨ /opt/haproxy-oracle/docker_volume ç›®å½•ä¸‹åˆ›å»ºå¦‚ä¸‹ haproxy.cfg æ–‡ä»¶ï¼Œè¯·å°†æ–‡ä»¶å°¾éƒ¨çš„ oracle åœ°å€å’Œç«¯å£æ”¹ä¸ºä½ çš„åœ°å€å’Œç«¯å£
global daemon log 127.0.0.1 local0 log 127.0.0.1 local1 notice maxconn 4096 tune.ssl.default-dh-param 2048 defaults log global retries 3 maxconn 2000 timeout connect 5s timeout client 50s timeout server 50s listen stats bind *:9090 balance mode http stats enable stats auth admin:admin stats uri /stats listen oracle-proxy log global bind :1521 mode tcp balance roundrobin server oracle-1 10.</description></item><item><title>Setting up Redis for Production</title><link>https://coolbeevip.github.io/posts/redis/redis-setting-up-redis-for-production/</link><pubDate>Wed, 19 Aug 2020 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/redis/redis-setting-up-redis-for-production/</guid><description>å®‰è£… å®˜æ–¹å»ºè®®çš„å®‰è£…æ–¹æ³•æ˜¯ä»æºä»£ç ç¼–è¯‘å®‰è£…ï¼Œæ‚¨å¯ä»¥ä» redis.io ä¸‹è½½æœ€æ–°ç¨³å®šç‰ˆçš„ TAR åŒ…
wget https://download.redis.io/releases/redis-6.2.5.tar.gz tar xvzf redis-6.2.5.tar.gz cd redis-6.2.5 make æ­¤æ—¶ï¼Œæ‚¨å¯ä»¥é€šè¿‡é”®å…¥ make test æ¥æµ‹è¯•æ‚¨çš„æ„å»ºæ˜¯å¦æ­£å¸¸å·¥ä½œã€‚ç¼–è¯‘å redis-6.2.5/src ç›®å½•å¡«å……äº†ä¸€éƒ¨åˆ†å¯æ‰§è¡Œæ–‡ä»¶ã€‚ æœ€å¥½å°†ç¼–è¯‘åçš„ Redis æ‰§è¡Œæ–‡ä»¶éƒ½å¤åˆ¶åˆ°é€‚å½“çš„ä½ç½®ï¼Œæˆ–è€…ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ‰‹åŠ¨å¤åˆ¶ï¼ˆå‡è®¾æˆ‘ä»¬çš„å®‰è£…è·¯å¾„æ˜¯ /usr/local/redisï¼‰ï¼š
# å¯æ‰§è¡Œæ–‡ä»¶ sudo mkdir -p /usr/local/redis/bin sudo cp src/redis-server /usr/local/redis/bin sudo cp src/redis-cli /usr/local/redis/bin sudo cp src/redis-sentinel /usr/local/redis/bin sudo cp src/redis-benchmark /usr/local/redis/bin sudo cp src/redis-check-aof /usr/local/redis/bin sudo cp src/redis-check-rdb /usr/local/redis/bin # é…ç½®æ–‡ä»¶ sudo mkdir -p /usr/local/redis/conf sudo cp redis.conf /usr/local/redis/conf sudo cp sentinel.conf /usr/local/redis/conf # æ•°æ®ç›®å½• sudo mkdir -p /usr/local/redis/data sudo mkdir -p /usr/local/redis/log # åˆ›å»ºé“¾æ¥ sudo ln -s /usr/local/redis/bin/redis-server /usr/bin/redis-server sudo ln -s /usr/local/redis/bin/redis-cli /usr/bin/redis-cli æç¤ºï¼š å¤åˆ¶å®Œæ¯•åï¼Œæ‚¨å¯ä»¥åˆ é™¤ redis-6.</description></item><item><title>Using Redis as a Cache</title><link>https://coolbeevip.github.io/posts/redis/redis-using-redis-as-a-cache/</link><pubDate>Wed, 19 Aug 2020 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/redis/redis-using-redis-as-a-cache/</guid><description>å½“ Redis ç”¨ä½œç¼“å­˜æ—¶ï¼Œé€šå¸¸å¯ä»¥æ–¹ä¾¿åœ°è®©å®ƒåœ¨æ‚¨æ·»åŠ æ–°æ•°æ®æ—¶è‡ªåŠ¨é©±é€æ—§æ•°æ®ã€‚Redis æ”¯æŒ 6 ç§é©±é€ç­–ç•¥ï¼Œä½ å¯ä»¥ä½¿ç”¨ maxmemory-policy ä¿®æ”¹é©±é€ç­–ç•¥ã€‚é»˜è®¤æ˜¯ä¸é©±é€ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœä½¿ç”¨çš„å†…å­˜è¶…è¿‡äº† maxmemory é™åˆ¶ï¼Œå°†æç¤º OOMã€‚
ä½ å¯ä»¥åœ¨ redis.conf é€šè¿‡ maxmemory 2gb è®¾ç½®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ config set maxmemory 2gb æ–¹å¼åŠ¨æ€è®¾ç½®ï¼Œæ³¨æ„ï¼š åœ¨64bitç³»ç»Ÿä¸‹ï¼Œmaxmemoryè®¾ç½®ä¸º0è¡¨ç¤ºä¸é™åˆ¶å†…å­˜ä½¿ç”¨ï¼Œåœ¨32bitç³»ç»Ÿä¸‹ï¼Œmaxmemoryä¸èƒ½è¶…è¿‡3GB
é©±é€ç­–ç•¥ noenviction: ç¦æ­¢é©±é€æ•°æ®(é»˜è®¤æ·˜æ±°ç­–ç•¥) å½“ redis å†…å­˜æ•°æ®è¾¾åˆ° maxmemoryï¼Œåœ¨è¯¥ç­–ç•¥ä¸‹ï¼Œç›´æ¥è¿”å›OOMé”™è¯¯ï¼› volatile-lru: é©±é€å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„å†…å­˜æ•°æ®é›†ä¸­æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®ï¼› volatile-ttl: é©±é€å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„å†…å­˜æ•°æ®é›†ä¸­å³å°†è¿‡æœŸçš„æ•°æ®ï¼› volatile-random: é©±é€å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„å†…å­˜æ•°æ®é›†ä¸­ä»»æ„æŒ‘é€‰æ•°æ®ï¼› allkeys-lru: é©±é€å†…å­˜æ•°æ®é›†ä¸­æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®ï¼› allkeys-random: é©±é€æ•°æ®é›†ä¸­ä»»æ„æŒ‘é€‰æ•°æ®ï¼› volatile-lfu é©±é€å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„å†…å­˜æ•°æ®é›†ä¸­ä½¿ç”¨é¢‘ç‡æœ€å°‘çš„æ•°æ®ï¼›ï¼ˆsince 4.0ï¼‰ allkeys-lfu é©±é€å†…å­˜æ•°æ®é›†ä¸­ä½¿ç”¨é¢‘ç‡æœ€å°‘çš„æ•°æ®ï¼›ï¼ˆsince 4.0ï¼‰ å¦‚æœ KEY æœªè®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œé‚£ä¹ˆ volatile-randomã€volatile-ttl å’Œ volatile-lru ç­‰åŒäº noenvictionã€‚
é©±é€ç¨‹åºå¦‚ä½•è¿ä½œ é‡è¦çš„æ˜¯è¦äº†è§£é©±é€è¿‡ç¨‹çš„å·¥ä½œæ–¹å¼å¦‚ä¸‹ï¼š
å®¢æˆ·ç«¯è¿è¡Œæ–°å‘½ä»¤ï¼Œå¯¼è‡´æ·»åŠ æ›´å¤šæ•°æ®ã€‚ Redis æ£€æŸ¥å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œå¦‚æœå¤§äº maxmemory limit ï¼Œåˆ™æ ¹æ®ç­–ç•¥é©±é€é”®ã€‚ æ‰§è¡Œæ–°å‘½ä»¤ï¼Œç­‰ç­‰ã€‚ æ‰€ä»¥æˆ‘ä»¬ä¸æ–­åœ°è¶Šè¿‡å†…å­˜é™åˆ¶çš„è¾¹ç•Œï¼Œè¶Šè¿‡å®ƒï¼Œç„¶åé€šè¿‡é©±é€é”®è¿”å›åˆ°é™åˆ¶ä¹‹ä¸‹ã€‚ å¦‚æœæŸä¸ªå‘½ä»¤å¯¼è‡´ä½¿ç”¨å¤§é‡å†…å­˜ä¸€æ®µæ—¶é—´ï¼Œåˆ™å†…å­˜é™åˆ¶å¯èƒ½ä¼šæ˜æ˜¾è¶…å‡ºã€‚</description></item><item><title>Kafka Commands</title><link>https://coolbeevip.github.io/posts/kafka-commands/</link><pubDate>Tue, 28 Jul 2020 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/kafka-commands/</guid><description>å¸¸ç”¨ Kafka å‘½ä»¤
Topics æŸ¥è¯¢ topic åˆ—è¡¨
./bin/kafka-topics.sh --bootstrap-server 127.0.0.1:9092 --list æŸ¥çœ‹ topic æè¿°
./bin/kafka-topics.sh --bootstrap-server 127.0.0.1:9092 --describe --topic my-topic Consumer Groups æŸ¥è¯¢æ¶ˆè´¹ç»„åˆ—è¡¨
./bin/kafka-consumer-groups.sh --bootstrap-server 127.0.0.1:9092 --list æŸ¥è¯¢æŒ‡å®šçš„ç»„å„ topic æ¶ˆæ¯æ¶ˆè´¹æƒ…å†µ
./bin/kafka-consumer-groups.sh --bootstrap-server 127.0.0.1:9092 --describe --group my-group</description></item><item><title>MySQL Commands</title><link>https://coolbeevip.github.io/posts/mysql/mysql-commands/</link><pubDate>Mon, 11 May 2020 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/mysql/mysql-commands/</guid><description>å¸¸ç”¨ MySQL å‘½ä»¤
è¿æ¥æ•°é…ç½® æŸ¥çœ‹å…è®¸çš„æœ€å¤§è¿æ¥æ•° show variables like &amp;#39;%max_connection%&amp;#39;; å¦‚æœè¿‡å»æ›¾è¾¾åˆ°æ­¤é™åˆ¶ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•æ£€æŸ¥ SHOW GLOBAL STATUS LIKE &amp;#39;max_use%&amp;#39;; é…ç½®ç”¨æˆ·çš„æœ€å¤§å¹¶å‘è¿æ¥æ•° GRANT USAGE ON *.* TO &amp;#39;repl&amp;#39;@&amp;#39;%&amp;#39; WITH MAX_CONNECTIONS_PER_HOUR 100 MAX_USER_CONNECTIONS 10; æŸ¥çœ‹ç”¨æˆ·çš„æœ€å¤§å¹¶å‘è¿æ¥æ•° SELECT User, Host, max_connections, max_user_connections FROM mysql.user; è®¾ç½®æœ€å¤§è¿æ¥æ•° set global max_connections=1000; æŸ¥çœ‹å½“å‰è¿æ¥æ•° show status like &amp;#39;Threads%&amp;#39;; Threads_cached å½“å‰çº¿ç¨‹æ± ä¸­ç¼“å­˜æœ‰å¤šå°‘ç©ºé—²çº¿ç¨‹ Threads_connected å½“å‰çš„è¿æ¥æ•° ( ä¹Ÿå°±æ˜¯çº¿ç¨‹æ•° ) Threads_running å·²ç»åˆ›å»ºçš„çº¿ç¨‹æ€»æ•° Threads_created å½“å‰æ¿€æ´»çš„çº¿ç¨‹æ•° ( Threads_connected ä¸­çš„çº¿ç¨‹æœ‰äº›å¯èƒ½å¤„äºä¼‘çœ çŠ¶æ€ ) thread_cache_size å€¼è¿‡å°ä¼šå¯¼è‡´é¢‘ç¹åˆ›å»ºçº¿ç¨‹ï¼Œç›´æ¥åæ˜ å°±æ˜¯ show status æŸ¥çœ‹ Threads_created å€¼è¿‡å¤§ã€‚ å½“ Threads_cached è¶Šæ¥è¶Šå°‘ ä½† Threads_connected å§‹ç»ˆä¸é™ ä¸” Threads_created æŒç»­å‡é«˜ è¿™æ—¶å¯é€‚å½“å¢åŠ  thread_cache_size çš„å¤§å°</description></item><item><title>Maven Projects Best Practices</title><link>https://coolbeevip.github.io/posts/maven/maven-best-practices-for-structuring-projects-and-modules/</link><pubDate>Sat, 02 May 2020 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/maven/maven-best-practices-for-structuring-projects-and-modules/</guid><description>æœ¬æ–‡æ•´ç†æ„å»ºMavené¡¹ç›®å’Œæ¨¡å—çš„æœ€ä½³å®è·µçš„å…³é”®äº‹é¡¹ï¼Œå…¶ä¸­åŒ…å«ä¾èµ–ã€ç‰ˆæœ¬ã€å±æ€§ã€æ¨¡å—åˆ’åˆ†ç­‰å…³é”®å› ç´ ï¼Œæ¨èä½¿ç”¨ Maven 3.6.3 åŠä»¥ä¸Šç‰ˆæœ¬ã€‚ ä¸ºäº†ä¾¿äºç†è§£ï¼Œæˆ‘ä»¬å‡è®¾æœ‰ä¸€ä¸ª API ç½‘å…³é¡¹ç›®ï¼Œè¿™ä¸ªç½‘å…³é¡¹ç›®åŒ…å«æœåŠ¡ç«¯ã€å®¢æˆ·ç«¯ã€é€šçŸ¥æœåŠ¡ç«¯æ”¯æŒæ’ä»¶ã€‚
ç›®æ ‡ é€šè¿‡å¤šæ¨¡å—æ–¹å¼ç»„ç»‡é¡¹ç›® ç®¡ç†é¡¹ç›®ç‰ˆæœ¬ã€ä¾èµ–ï¼Œå±æ€§ è§„åˆ’æ¨¡å—ä¾èµ–å…³ç³» ä¸»é¡¹ç›® POM æ¯ä¸ªé¡¹ç›®éƒ½åº”è¯¥åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æœ‰ä¸€ä¸ªä¸» POM æ–‡ä»¶ï¼Œå¹¶é€šè¿‡ä¸» POM æ–‡ä»¶ç®¡ç†ä¸‹çº§å­æ¨¡å—ã€‚åœ¨ä¸» POM ä¸­è‡³å°‘ä¼šä½¿ç”¨ä¸€ä¸‹æ ‡ç­¾
properties: å®šä¹‰å­—ç¬¦é›†ç¼–ç ã€JDK ç‰ˆæœ¬ã€æ’ä»¶ç‰ˆæœ¬; modules: ä¸‹çº§å­æ¨¡å—; pluginRepositories: æ’ä»¶ä»“åº“åœ°å€ï¼ˆéå¿…é¡»ï¼Œä¸»è¦è§£å†³å›½å†…è®¿é—®æ…¢çš„é—®é¢˜ï¼‰; repositories: å®šä¹‰ Maven ç§æœåœ°å€; distributionManagement: å®šä¹‰å‘å¸ƒç”¨ Maven ç§æœåœ°å€ pluginManagement: å®šä¹‰ç®¡ç†ç±»æ’ä»¶ç‰ˆæœ¬ ä¾‹å¦‚ï¼š
&amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;UTF-8&amp;#34;?&amp;gt; &amp;lt;build xmlns=&amp;#34;http://maven.apache.org/POM/4.0.0&amp;#34; xmlns:xsi=&amp;#34;http://www.w3.org/2001/XMLSchema-instance&amp;#34; xsi:schemaLocation=&amp;#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&amp;#34;&amp;gt; &amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt; &amp;lt;groupId&amp;gt;com.coolbeevip.apigateway&amp;lt;/groupId&amp;gt; &amp;lt;artifactId&amp;gt;apigateway-parent&amp;lt;/artifactId&amp;gt; &amp;lt;version&amp;gt;1.0.0-SNAPSHOT&amp;lt;/version&amp;gt; &amp;lt;packaging&amp;gt;pom&amp;lt;/packaging&amp;gt; &amp;lt;properties&amp;gt; &amp;lt;!-- project --&amp;gt; &amp;lt;project.</description></item><item><title>Git Squash Commits</title><link>https://coolbeevip.github.io/posts/git/git-command-commit-squash/</link><pubDate>Mon, 06 Apr 2020 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/git/git-command-commit-squash/</guid><description>å‹ç¼©åˆå¹¶ Commitsï¼Œå°†å¤šä¸ª commit æ•´ç†åˆå¹¶çš„æ–¹æ³•ï¼Œè¿™æ ·å¯ä»¥ä½¿æäº¤è®°å½•æ›´åŠ æ¸…æ™°
æŸ¥çœ‹æäº¤è®°å½•ï¼Œé€‰æ‹©ä½ è¦åˆå¹¶çš„èŒƒå›´ git log commit 6d757f70af289b5a90d00bd5e4b93d892d64a258 (HEAD -&amp;gt; SCB-1669) Author: Lei Zhang &amp;lt;zhanglei@apache.org&amp;gt; Date: Thu Dec 19 13:53:26 2019 +0800 SCB-1669 Fixed reverse compensation sort bug in FSM commit 37e0c5d99d0e6dae188cbd78f543ba69433b928f (origin/SCB-1669) Author: Lei Zhang &amp;lt;zhanglei@apache.org&amp;gt; Date: Thu Dec 19 02:00:20 2019 +0800 SCB-1669 Fixed Reverse compensation sort bug in FSM commit b4ea8717a86d1eba1956d21727d05c466ff6d8a2 (upstream/master, origin/master, origin/HEAD, master) Author: Lei Zhang &amp;lt;zhanglei@apache.</description></item><item><title>Git Stash</title><link>https://coolbeevip.github.io/posts/git/git-command-commit-stash/</link><pubDate>Mon, 06 Apr 2020 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/git/git-command-commit-stash/</guid><description>ä½ åœ¨å½“å‰åˆ†æ”¯ä¸Šå¼€å‘ä»£ç ï¼Œæ­¤æ—¶ä¸æƒ³ commitï¼Œä½†æ˜¯åˆæƒ³åˆ‡æ¢åˆ°å…¶ä»–åˆ†æ”¯å®Œæˆå…¶ä»–çš„å·¥ä½œï¼Œæ­¤æ—¶å¯ä»¥ç”¨ stash
åœ¨å½“å‰åˆ†æ”¯æ‰§è¡Œ stash å°†å½“å‰åˆ†æ”¯æœªæäº¤çš„ä»£ç éšè—èµ·æ¥ $ git stash Saved working directory and index state WIP on SCB-1577: 2554be3d SCB-1593 Add notice for Boringssl support ciphers (base) bogon:servicecomb-pack zhanglei$ æ­¤æ—¶ä½ å¯ä»¥çœ‹åˆ°å·²ç»å­˜å‚¨åˆ°ä¸€ä¸ªidä¸º 2554be3d é‡Œäº†ï¼Œè¿™æ—¶ä½ å¯ä»¥ç”¨ git status æŸ¥çœ‹å·²ç»æ²¡æœ‰è¦æäº¤çš„å†…å®¹äº†
git status On branch SCB-1577 nothing to commit, working tree clean (base) bogon:servicecomb-pack zhanglei$ è¿™æ—¶ä½ å°±å¯ä»¥åˆ‡æ¢åˆ°å…¶ä»–åˆ†æ”¯å¼€å§‹æ–°çš„å·¥ä½œ (base) bogon:servicecomb-pack zhanglei$ git checkout master Switched to branch &amp;#39;master&amp;#39; Your branch is up to date with &amp;#39;origin/master&amp;#39;.</description></item><item><title>Synchronizing Your Forked Git Project</title><link>https://coolbeevip.github.io/posts/git/git-command-rebase-upstream/</link><pubDate>Mon, 06 Apr 2020 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/git/git-command-rebase-upstream/</guid><description>å½“ä½  fork ä¸€ä¸ªä»“åº“åï¼Œå¯ä»¥æ—¶ç”¨æ­¤æ–¹æ³•ä½¿ä½  fork åçš„ä»“åº“ master åˆ†æ”¯ä¿æŒå’Œä¸Šæ¸¸ master åˆ†æ”¯çš„åŒæ­¥
ä½¿ç”¨ rebase å‘½ä»¤åŒæ­¥ä¸Šæ¸¸ master åˆ†æ”¯åˆ°ä½ æœ¬åœ°çš„ master åˆ†æ”¯ï¼Œå¹¶æ¨é€åˆ°ä½  fork åçš„ä»“åº“
git fetch upstream git checkout master git rebase upstream/master git push -f origin master æˆ–è€…ä½ ç¡®å®šæ”¾å¼ƒä½ æœ¬åœ°æ‰€æœ‰çš„ä¿®æ”¹ï¼Œåˆ™å¯ä»¥ç®€å•çš„é‡ç½®ä¸ºä¸Šæ¸¸ç‰ˆæœ¬
git fetch upstream git checkout master git reset --hard upstream/master git push -f origin master å¦‚æœä½ ä¹Ÿæƒ³åŒæ­¥ master åˆ†æ”¯çš„ä¿®æ”¹åˆ°ä½ çš„åŠŸèƒ½åˆ†æ”¯
git checkout &amp;lt;åˆ†æ”¯å&amp;gt; git rebase master git push -f origin &amp;lt;åˆ†æ”¯å&amp;gt;</description></item><item><title>Linux Command - Network</title><link>https://coolbeevip.github.io/posts/linux/linux-commands-network/</link><pubDate>Wed, 02 Oct 2019 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/linux/linux-commands-network/</guid><description>Linux ç½‘ç»œç›¸å…³å‘½ä»¤
å¯ä»¥ä½¿ç”¨ yum install iperf3 å®‰è£…è¿™ä¸ªå·¥å…·ï¼Œæˆ–è€…ä»ç½‘ç«™ https://iperf.fr/iperf-download.php ä¸‹è½½
æµ‹è¯• TCP ååé‡ å‡è®¾æˆ‘ä»¬è¦æµ‹è¯• 10.1.207.180 å’Œ 10.1.207.181 ä¸¤ä¸ªæœåŠ¡å™¨ä¹‹é—´çš„å¸¦å®½
å…ˆåœ¨å…¶ä¸­ä¸€å°æœåŠ¡å™¨ 10.1.207.181 æœä¸Šå¯åŠ¨ iperf3 æœåŠ¡
[root@oss-irms-181 ~]# iperf3 -s -p 5001 ----------------------------------------------------------- Server listening on 5001 ----------------------------------------------------------- å†åœ¨å¦ä¸€å°æœºå™¨ 10.1.207.180 å¯åŠ¨å®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯ 10.1.207.181 æµ‹è¯•
[root@oss-irms-180 ~]# iperf3 -c 10.1.207.181 -P 4 -t 30 -i 2 -p 5001 Connecting to host 10.1.207.181, port 5001 [ 4] local 10.1.207.180 port 49244 connected to 10.1.207.181 port 5001 [ 6] local 10.</description></item><item><title>Git Reset HEAD</title><link>https://coolbeevip.github.io/posts/git/git-reset-head/</link><pubDate>Tue, 06 Aug 2019 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/git/git-reset-head/</guid><description>Git åˆ†æ”¯éå¸¸æœ‰ç”¨ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œåˆå¹¶ä¸€ä¸ªåˆ†æ”¯æˆ–åˆ é™¤ä¸€ä¸ªåˆ†æ”¯ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨è®¸å¤š git å‘½ä»¤æ¥ç®¡ç† git ä¸­çš„åˆ†æ”¯ã€‚
å½“æ‚¨ä½¿ç”¨ git checkout åˆ†æ”¯æ—¶ï¼ŒHEADä¼šæŒ‡å‡ºæœ€åçš„æäº¤ã€‚ ç®€å•æ¥è¯´ï¼Œæ‚¨å¯ä»¥è¯´ Git HEAD æ˜¯å½“å‰åˆ†æ”¯ã€‚ æ¯å½“æ‚¨ç­¾å‡ºä¸€ä¸ªåˆ†æ”¯æˆ–åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯æ—¶ï¼ŒGit HEAD éƒ½ä¼šè½¬ç§»å®ƒã€‚
HEAD æ˜¯å¯¹å½“å‰æ£€å‡ºåˆ†æ”¯ä¸­æœ€åä¸€æ¬¡æäº¤çš„å¼•ç”¨ã€‚
åœ¨å­˜å‚¨åº“ä¸­ï¼ŒHEAD å§‹ç»ˆæŒ‡å‘å½“å‰åˆ†æ”¯çš„èµ·ç‚¹ã€‚ æ¢å¥è¯è¯´ï¼ŒHEAD æ˜¯æŒ‡å‘ä¸‹ä¸€ä¸ªæäº¤çš„çˆ¶å¯¹è±¡æˆ–ä¸‹ä¸€ä¸ªæäº¤å°†å‘ç”Ÿçš„åœ°æ–¹çš„æŒ‡é’ˆã€‚
æ›´å…·ä½“åœ°è¯´ï¼ŒHEAD æ˜¯ä¸€ä¸ªç§»åŠ¨æŒ‡é’ˆï¼Œå®ƒå¯ä»¥å¼•ç”¨æˆ–å¯ä»¥ä¸å¼•ç”¨å½“å‰åˆ†æ”¯ï¼Œä½†æ˜¯å®ƒå§‹ç»ˆå¼•ç”¨å½“å‰æäº¤ã€‚
ä»€ä¹ˆæ˜¯ HEAD^ æ’å…¥ç¬¦ï¼ˆ^ï¼‰æ˜¯ Commit çš„çˆ¶çº§ã€‚
ä»€ä¹ˆæ˜¯ HEAD~ ä»£å­—å·ï¼ˆã€œï¼‰æ˜¯ä¸€è¡Œå‡ ä¸ªå­—ç¬¦ï¼ˆ^ï¼‰çš„ç®€å†™å­—ç¬¦ã€‚
HEADã€œ2 ä¸ HEAD ^^ çš„ä½œç”¨ç›¸åŒã€‚
å¦‚æœå†™æ•°å­—ï¼Œåˆ™ä½¿ç”¨çš„é»˜è®¤å€¼ä¸º1ï¼Œå› æ­¤ HEADã€œ ç­‰ä»·äº HEAD ^ã€‚
å¦‚ä½•æ£€æŸ¥HEADçš„çŠ¶æ€ æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å½“å‰ Git HEAD æŒ‡å‘çš„ä½ç½®ï¼š
$ cat .git/HEAD ref: refs/heads/master å¹¶ä¸”ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æŒ‡å‘ HEAD çš„ commit çš„ Hash IDï¼š
$ git rev-parse --short HEAD 6f975a5 Detached HEAD HEAD æ˜¯æ‚¨ç›®å‰çš„å·¥ä½œåˆ†æ”¯ã€‚ å½“æ‚¨å°è¯• git checkout åˆ†æ”¯æ—¶ï¼ŒHEAD æŒ‡å‘è¯¥åˆ†æ”¯çš„é¡¶éƒ¨ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥ç»§ç»­å·¥ä½œè€Œæ²¡æœ‰ä»»ä½•å›°éš¾ã€‚</description></item><item><title>Git Revert</title><link>https://coolbeevip.github.io/posts/git/git-command-revert/</link><pubDate>Tue, 06 Aug 2019 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/git/git-command-revert/</guid><description>æ’¤é”€ä¸Šä¸€æ¬¡æäº¤
$ git revert HEAD æ’¤é”€ä¸Šä¸¤æ¬¡æäº¤
ISSUE-4 è§£å†³ç½‘å…³æœåŠ¡æ—¥å¿—ä¸­æ— æ³•æ­£ç¡®æ˜¾ç¤ºç»è¿‡ä»£ç†è®¿é—®çš„è¯·æ±‚ç«¯ IP é—®é¢˜ $ git revert [å€’æ•°ç¬¬ä¸€ä¸ªæäº¤] [å€’æ•°ç¬¬äºŒä¸ªæäº¤]</description></item><item><title>Important JVM Options</title><link>https://coolbeevip.github.io/posts/java/java-jvm-options/</link><pubDate>Tue, 06 Aug 2019 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/java/java-jvm-options/</guid><description>Heap Memory -XX:MetaspaceSize Metaspace ç©ºé—´åˆå§‹å¤§å°ï¼Œå¦‚æœä¸è®¾ç½®çš„è¯ï¼Œé»˜è®¤æ˜¯20.79Mã€‚è¿™ä¸ªåˆå§‹å¤§å°æ˜¯è§¦å‘é¦–æ¬¡ Metaspace Full GC çš„é˜ˆå€¼ï¼Œä¾‹å¦‚ -XX:MetaspaceSize=128M
-XX:MaxMetaspaceSize Metaspace æœ€å¤§å€¼ï¼Œé»˜è®¤ä¸é™åˆ¶å¤§å°ï¼Œä½†æ˜¯çº¿ä¸Šç¯å¢ƒå»ºè®®è®¾ç½®ï¼Œä¾‹å¦‚ -XX:MaxMetaspaceSize=512M
GC -Xnoclassgc è¡¨ç¤ºå…³é—­JVMå¯¹ç±»çš„åƒåœ¾å›æ”¶ï¼Œç¼ºçœæƒ…å†µä¸‹ï¼Œå½“ä¸€ä¸ªç±»æ²¡æœ‰ä»»ä½•æ´»åŠ¨å®ä¾‹æ—¶ï¼ŒJVM å°±ä¼šä»å†…å­˜ä¸­å¸è£…è¯¥ç±»ï¼Œä½†æ˜¯è¿™æ ·ä¼šä½¿æ€§èƒ½ä¸‹é™ã€‚å¦‚æœå…³é—­ç±»åƒåœ¾å›æ”¶ï¼Œå°±å¯ä»¥æ¶ˆé™¤ç”±äºå¤šæ¬¡è£…å…¥å’Œå¸è£…åŒä¸€ä¸ªç±»è€Œé€ æˆçš„å¼€é”€
-XX:+UseParNewGC è®¾ç½®å¹´è½»ä»£ä¸ºå¹¶è¡Œæ”¶é›†
-XX:MaxTenuringThreshold æ§åˆ¶æ–°ç”Ÿä»£éœ€è¦ç»å†å¤šå°‘æ¬¡GCâ€‹æ™‹å‡åˆ°è€å¹´ä»£ä¸­çš„æœ€å¤§é˜ˆå€¼ï¼Œé»˜è®¤å€¼ 15
-XX:+CMSParallelRemarkEnabled CMSæ”¶é›†ç®—æ³•æ­¥éª¤å¦‚ä¸‹ï¼šåˆå§‹æ ‡è®° -&amp;gt; å¹¶å‘æ ‡è®° -&amp;gt; é‡æ–°æ ‡è®° -&amp;gt; æ ‡è®°æ¸…é™¤ã€‚ å…¶ä¸­ åˆå§‹æ ‡è®°å’Œé‡æ–°æ ‡è®°éƒ½éœ€è¦STWï¼Œå³æš‚åœç”¨æˆ·çº¿ç¨‹ã€‚ CMSParallelRemarkEnabledå‚æ•°å¯ä»¥è®©é‡æ–°æ ‡è®°é˜¶æ®µè¿›è¡Œå¹¶è¡Œé‡æ–°æ ‡è®°ï¼Œå‡å°‘æš‚åœæ—¶é—´
-XX:SurvivorRatio è®¾ç½® Edenã€S0ã€S1 åˆ†é…æ¯”ä¾‹ï¼Œé»˜è®¤å€¼æ˜¯ 8
-XX:SurvivorRatio=5 è¡¨ç¤º Eden å  50%ï¼ŒS0ã€S1 å¹³åˆ†å‰©ä½™ç©ºé—´
-XX:+UseCompressedOops In short, don&amp;rsquo;t turn it on, use a version which has it on by default.
https://stackoverflow.com/questions/11054548/what-does-the-usecompressedoops-jvm-flag-do-and-when-should-i-use-it
-XX:+DisableExplicitGC ç¦æ­¢ System.gc() è§¦å‘ GC æ“ä½œï¼Œå½“æ²¡æœ‰å¼€å¯ DisableExplicitGC è¿™ä¸ªå‚æ•°æ—¶,ä½ ä¼šå‘ç°JVMæ¯ä¸ªå°æ—¶ä¼šæ‰§è¡Œä¸€æ¬¡Full GC,è¿™æ˜¯å› ä¸ºJVMåœ¨åšåˆ†å¸ƒå¼GC,ä¸ºRMIæœåŠ¡çš„, å¯ä»¥é€šè¿‡ sun.</description></item><item><title>Linux Command - Disk</title><link>https://coolbeevip.github.io/posts/linux/linux-commands-disk/</link><pubDate>Mon, 06 May 2019 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/linux/linux-commands-disk/</guid><description>Linux ç£ç›˜ç›¸å…³å‘½ä»¤
ç£ç›˜IO dd [root@localhost ~]# dd if=/dev/zero of=./a.dat bs=8K count=1M conv=fdatasync è®°å½•äº†8192+0 çš„è¯»å…¥ è®°å½•äº†8192+0 çš„å†™å‡º 8589934592å­—èŠ‚(8.6 GB)å·²å¤åˆ¶ï¼Œ14.8606 ç§’ï¼Œ578 MB/ç§’ [root@localhost ~]# dd if=./a.dat of=/dev/null bs=1M count=8k iflag=direct è®°å½•äº†8192+0 çš„è¯»å…¥ è®°å½•äº†8192+0 çš„å†™å‡º 8589934592å­—èŠ‚(8.6 GB)å·²å¤åˆ¶ï¼Œ14.2462 ç§’ï¼Œ603 MB/ç§’ ç£ç›˜ç©ºé—´ df æŸ¥çœ‹ç£ç›˜å„ä¸ªåˆ†åŒºçš„ç©ºé—´å¤§å°ã€å ç”¨ã€å¯ç”¨ç­‰ä¿¡æ¯
$ df -h Filesystem Size Used Avail Capacity iused ifree %iused Mounted on /dev/disk1s5 466Gi 10Gi 128Gi 8% 488463 4881964417 0% / devfs 192Ki 192Ki 0Bi 100% 663 0 100% /dev /dev/disk1s1 466Gi 318Gi 128Gi 72% 4557528 4877895352 0% /System/Volumes/Data /dev/disk1s4 466Gi 8.</description></item><item><title>Git Commands</title><link>https://coolbeevip.github.io/posts/git/git-commands/</link><pubDate>Sat, 06 Apr 2019 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/git/git-commands/</guid><description>å¸¸ç”¨ Git å‘½ä»¤
Init åœ¨å·²æœ‰ç›®å½•ä¸­åˆå§‹åŒ– GIT ä»“åº“
$ git init $ git remote add origin &amp;lt;ä»“åº“åœ°å€&amp;gt; $ git add . $ git commit -m &amp;#34;Initial commit&amp;#34; $ git push -u origin master Branch åˆ›å»ºåˆ†æ”¯
git checkout -b &amp;lt;åˆ†æ”¯å&amp;gt; æ¨é€åˆ†æ”¯
git push origin &amp;lt;åˆ†æ”¯å&amp;gt; ä¿®æ”¹åˆ†æ”¯å
git branch -m &amp;lt;æ—§åˆ†æ”¯å&amp;gt; &amp;lt;æ–°åˆ†æ”¯å&amp;gt; åˆ é™¤æœ¬åœ°åˆ†æ”¯
git branch -D &amp;lt;åˆ†æ”¯å&amp;gt; åˆ é™¤è¿œç¨‹åˆ†æ”¯
git push origin --delete &amp;lt;åˆ†æ”¯å&amp;gt; æ‹‰å–è¿œç¨‹åˆ†æ”¯
git fetch origin &amp;lt;åˆ†æ”¯å&amp;gt; æ‹‰å–è¿œç¨‹åˆ†æ”¯å¹¶åˆ‡æ¢
git checkout -b &amp;lt;åˆ†æ”¯å&amp;gt; origin/&amp;lt;åˆ†æ”¯å&amp;gt; å½“å‰åˆ†æ”¯ä¼šé€€åˆ°æŒ‡å®šç‰ˆæœ¬</description></item><item><title>Docker Commands</title><link>https://coolbeevip.github.io/posts/docker/docker-commands/</link><pubDate>Wed, 06 Feb 2019 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/docker/docker-commands/</guid><description>å¸¸ç”¨ Docker å‘½ä»¤è®°å½•
é•œåƒ åˆ é™¤æ‰€æœ‰é•œåƒ docker rmi -f $(docker images | awk &amp;#39;{print $3}&amp;#39;) åˆ é™¤æ‰€æœ‰ dangling é•œåƒ docker rmi -f $(docker images -a | grep &amp;#34;&amp;lt;none&amp;gt;&amp;#34; | awk &amp;#39;{print $3}&amp;#39;) å¯¼å‡ºé•œåƒ docker save -o postgres_9.6.tar postgres:9.6 å¯¼å…¥é•œåƒ docker load -i postgres_9.6.tar å®¹å™¨ åˆ é™¤æ‰€æœ‰ Exited å®¹å™¨ docker rm $(docker ps -a | grep Exited | awk &amp;#39;{print $1}&amp;#39;) åœæ­¢å¹¶åˆ é™¤æ‰€æœ‰å®¹å™¨ docker stop $(docker ps | awk &amp;#39;{print $1}&amp;#39;) docker rm -f $(docker ps -a | awk &amp;#39;{print $1}&amp;#39;) åœæ­¢ dead å®¹å™¨ åˆ é™¤å®ä¾‹æ—¶æç¤º device or resource busy</description></item><item><title>Flyway hung on the MySQL Router + MGR</title><link>https://coolbeevip.github.io/posts/flyway/flyway-hung-on-mysql-router-mgr/</link><pubDate>Thu, 29 Nov 2018 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/flyway/flyway-hung-on-mysql-router-mgr/</guid><description>Flyway è¿æ¥ MySQL Router åå¯åŠ¨å¡åœ¨ GET_LOCK è¯­å¥
ç°è±¡ MySQL MGR + Router éƒ¨ç½²é«˜å¯ç”¨é›†ç¾¤ Flyway å®¢æˆ·ç«¯ä½¿ç”¨ jdbc:mysql:loadbalance è¿æ¥ åˆå§‹åŒ– Schema History è¡¨ã€æˆ–è€…æ‰§è¡Œå¤šä¸ª SQL è„šæœ¬æ—¶ å½“æ»¡è¶³ä»¥ä¸Šæ¡ä»¶æ—¶ï¼ŒFlyway ä¼šå¡åœ¨åˆå§‹åŒ–é˜¶æ®µï¼Œç»è¿‡åˆ†æå‘ç°åœé¡¿åœ¨æ‰§è¡Œ GET_LOCK è¯­å¥æ—¶
åŸå›  Flyway é»˜è®¤åœ¨æ‰§è¡Œ DDL è„šæœ¬æ—¶ä¸å¯ç”¨äº‹åŠ¡ï¼Œåœ¨åˆå§‹åŒ–æ—¶ Flyway ä¼šå…ˆæ‰§è¡Œ GET_LOCK é”å®šæ•°æ®åº“ï¼Œç„¶åå†æ‰§è¡Œ DDL è„šæœ¬ã€‚å½“ä½¿ç”¨ jdbc:mysql:loadbalance è¿æ¥æ—¶ï¼Œä¼šéšæœºé€‰æ‹©ä¸€ä¸ªæ•°æ®æºï¼Œå¦‚æœæ‰§è¡Œ GET_LOCK å’Œ æ‰§è¡Œ DDL ä¸æ˜¯ä¸€ä¸ªæ•°æ®æºï¼Œå°±ä¼šå¯¼è‡´æ‰§è¡Œç­‰å¾…é”é‡Šæ”¾
è§£å†³åŠæ³• åœ¨å¯åŠ¨æ—¶è®¾ç½® group=true å‚æ•°ï¼Œè¿™æ · Flyway åœ¨åˆå§‹åŒ–æ—¶å°±ä¼šå¯ç”¨äº‹åŠ¡ï¼Œç¡®ä¿ä¸€ä¸ªäº‹åŠ¡å†…çš„ DDL éƒ½åœ¨ä¸€ä¸ªæ•°æ®æºæ‰§è¡Œ
ISSUE-3154
public class FlywayTestManual { String url=&amp;#34;jdbc:mysql:loadbalance://192.168.51.206:3810,192.168.51.207:3810/nc_notifier?roundRobinLoadBalance=false&amp;amp;characterEncoding=utf8&amp;amp;zeroDateTimeBehavior=convertToNull&amp;amp;useSSL=false&amp;amp;useJDBCCompliantTimezoneShift=true&amp;amp;useLegacyDatetimeCode=false&amp;amp;serverTimezone=GMT%2B8&amp;amp;allowMultiQueries=true&amp;amp;allowPublicKeyRetrieval=true&amp;#34;; String user=&amp;#34;user&amp;#34;; String password=&amp;#34;pass&amp;#34;; @Test public void test(){ Flyway flyway = Flyway.</description></item><item><title>Flyway Support Oracle</title><link>https://coolbeevip.github.io/posts/flyway/java-flyway-support-oracle/</link><pubDate>Thu, 29 Nov 2018 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/flyway/java-flyway-support-oracle/</guid><description>è®°å½•åœ¨ä½¿ç”¨ Flyway ç®¡ç† Oracle æ•°æ®åº“è„šæœ¬æ—¶é‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼ŒFlyway 5.2.1 - 7.7.3 éƒ½å­˜åœ¨æ­¤é—®é¢˜ã€‚
1. Flyway not support Oracle 11g å¼‚å¸¸ä¿¡æ¯
Caused by: org.flywaydb.core.internal.license.FlywayEditionUpgradeRequiredException: Flyway Enterprise Edition or Oracle upgrade required: Oracle 11.2 is no longer supported by Flyway Community Edition, but still supported by Flyway Enterprise Edition. at org.flywaydb.core.internal.database.base.Database.ensureDatabaseNotOlderThanOtherwiseRecommendUpgradeToFlywayEdition(Database.java:173) at org.flywaydb.core.internal.database.oracle.OracleDatabase.ensureSupported(OracleDatabase.java:91) at org.flywaydb.core.Flyway.execute(Flyway.java:514) at org.flywaydb.core.Flyway.migrate(Flyway.java:159) at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:65) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1855) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1792) ... 19 common frames omitted ä¿®æ”¹ Flyway 5.</description></item><item><title>To roll up Flyway incremental changes into 1 file</title><link>https://coolbeevip.github.io/posts/flyway/java-flyway-merge-script-step/</link><pubDate>Thu, 29 Nov 2018 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/flyway/java-flyway-merge-script-step/</guid><description>Flyway é€šè¿‡ SQL Patch è„šæœ¬çš„æ–¹å¼ç®¡ç†æ•°æ®åº“è„šæœ¬ç‰ˆæœ¬ï¼Œå¼€å‘ä¸€æ®µæ—¶é—´åä¼šç§¯æ”’å¤§é‡è„šæœ¬ã€‚å½“ä¸€ä¸ªç‰ˆæœ¬ç¨³å®šåæˆ‘ä»¬å¸Œæœ›åˆå¹¶æˆä¸€ä¸ªå…¨é‡è„šæœ¬
1.é¦–å…ˆå¯¹é½ç¨‹åºä¸æ•°æ®åº“ä¸­çš„è„šæœ¬ç‰ˆæœ¬å· æŸ¥çœ‹ç¨‹åºä¸­è„šæœ¬ç‰ˆæœ¬æ¸…å•ï¼Œä¾‹å¦‚ï¼šç¨‹åºä¸­æœ‰ä¸‰ä¸ªç‰ˆæœ¬çš„è„šæœ¬
V1.0.0.0__init.sql V1.0.0.1__add_user_table.sql V1.0.0.2__modify_user_table.sql æŸ¥çœ‹æ•°æ®åº“ä¸­å†å²ç‰ˆæœ¬è®°å½•è¡¨ (é»˜è®¤æ˜¯ flyway_schema_history) ä¸­æ‰§è¡Œè¿‡çš„è„šæœ¬ç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼š
versions description script success 1.0.0.0 init.sql V1.0.0.0__init.sql 1 1.0.0.1 add_user_table.sql V1.0.0.1__add_user_table.sql 1 1.0.0.2 modify_user_table V1.0.0.2__modify_user_table.sql 1 è¿™é‡Œåªæ‘˜å–äº†å…³é”®å­—æ®µï¼Œä½ å¯ä»¥çœ‹åˆ°æ¯ä¸ªç‰ˆæœ¬éƒ½å·²ç»æ‰§è¡Œï¼Œå¹¶ä¸”æ‰§è¡Œéƒ½æ˜¯æˆåŠŸçš„ success=1
è‡³æ­¤ï¼šä½ å·²ç»å¯¹é½äº†ç¨‹åºå’Œæ•°æ®åº“ä¸­è„šæœ¬ç‰ˆæœ¬å·ï¼Œå¯ä»¥å¼€å§‹å‡†å¤‡åˆå¹¶äº†
2.åˆå¹¶ç¨‹åºä¸­çš„SQLè„šæœ¬ åˆå¹¶å¤šä¸ªè„šæœ¬çš„å†…å®¹åˆ°æœ€å¤§ç‰ˆæœ¬å·çš„æ–‡ä»¶ä¸­ï¼Œä¾‹å¦‚ï¼šå°† V1.0.0.0__init.sql, V1.0.0.1__add_user_table.sql, V1.0.0.2__modify_user_table.sql åˆå¹¶ä¸º V1.0.0.2__init.sql
æ³¨æ„ï¼š ä¸æ˜¯ç®€å•çš„æ–‡ä»¶åˆå¹¶ï¼Œè€Œæ˜¯æœ€ç»ˆæ‰§è¡Œç»“æœçš„åˆå¹¶
3.é‡æ–°æ‰“åŒ…ç¨‹åº åªåŒ…å«åˆ V1.0.0.2__init.sql è„šæœ¬çš„ç¨‹åº
4.åœæ­¢æ‰€æœ‰è€ç‰ˆæœ¬çš„ç¨‹åº åŒ…å« V1.0.0.0__init.sql,V1.0.0.1__add_user_table.sql,V1.0.0.2__modify_user_table.sql è€è„šæœ¬çš„ç¨‹åº
5.åˆ é™¤æ•°æ®åº“ä¸­çš„ç‰ˆæœ¬å†å²è¡¨ é»˜è®¤æ˜¯ flyway_schema_history
6.é‡å¯åº”ç”¨ç¨‹åº åœ¨ç¨‹åºå¯åŠ¨æ—¶è®¾ç½®åŸºçº¿ç‰ˆæœ¬å‚æ•°ä¸ºå½“å‰ç‰ˆæœ¬ï¼Œè®¾ç½®è¿™ä¸ªå‚æ•°çš„ç›®çš„æ˜¯å‘Šè¯‰ Flyway å½“å‰å·²ç»æ‰§è¡Œè¿‡ 1.</description></item><item><title>Maven Commands</title><link>https://coolbeevip.github.io/posts/maven/maven-commands/</link><pubDate>Fri, 23 Nov 2018 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/maven/maven-commands/</guid><description>å¸¸ç”¨ Maven å‘½ä»¤
Parameters -D æŒ‡å®šå‚æ•°ï¼Œå¦‚ -Dmaven.test.skip=true è·³è¿‡å•å…ƒæµ‹è¯•ï¼› -P æŒ‡å®š Profile é…ç½®ï¼Œå¯ä»¥ç”¨äºåŒºåˆ†ç¯å¢ƒï¼› -e æ˜¾ç¤ºmavenè¿è¡Œå‡ºé”™çš„ä¿¡æ¯ï¼› -o ç¦»çº¿æ‰§è¡Œå‘½ä»¤,å³ä¸å»è¿œç¨‹ä»“åº“æ›´æ–°åŒ…ï¼› -f å¼ºåˆ¶æŒ‡å®šä½¿ç”¨ POM æ–‡ä»¶ï¼Œæˆ–è€…åŒ…å« POM æ–‡ä»¶çš„ç›®å½• -pl é€‰é¡¹åå¯è·Ÿéš{groupId}:{artifactId}æˆ–è€…æ‰€é€‰æ¨¡å—çš„ç›¸å¯¹è·¯å¾„(å¤šä¸ªæ¨¡å—ä»¥é€—å·åˆ†éš”) -am è¡¨ç¤ºåŒæ—¶å¤„ç†é€‰å®šæ¨¡å—æ‰€ä¾èµ–çš„æ¨¡å— -amd è¡¨ç¤ºåŒæ—¶å¤„ç†ä¾èµ–é€‰å®šæ¨¡å—çš„æ¨¡å— -rf è¡¨ç¤ºä»æŒ‡å®šæ¨¡å—å¼€å§‹ç»§ç»­å¤„ç† -N è¡¨ç¤ºä¸é€’å½’å­æ¨¡å— -X æ˜¾ç¤ºmavenå…è®¸çš„debugä¿¡æ¯ï¼› -U å¼ºåˆ¶å»è¿œç¨‹æ›´æ–° snapshotçš„æ’ä»¶æˆ–ä¾èµ–ï¼Œé»˜è®¤æ¯å¤©åªæ›´æ–°ä¸€æ¬¡ã€‚ &amp;ndash;no-snapshot-updates ç¦æ­¢æ›´æ–° snapshot Dependency æ˜¾ç¤ºmavenä¾èµ–æ•°
mvn dependency:tree æ˜¾ç¤ºmavenä¾èµ–åˆ—è¡¨
mvn dependency:list ä¸‹è½½ä¾èµ–åŒ…çš„æºç 
mvn dependency:sources Maven Wrapper è‡ªåŠ¨å®‰è£… maven çš„åŒ…è£…å™¨ï¼ˆé€‚åˆä¸æƒ³æ‰‹åŠ¨å®‰è£…Mavençš„ç”¨æˆ·ï¼‰ï¼Œä½¿ç”¨æ’ä»¶Maven Wrapper pluginå°†å…¶è‡ªåŠ¨åŒ–å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ Maven
mvn -N io.takari:maven:wrapper -Dmaven=3.6.3 è¿™ä¸ªå‘½ä»¤ä¼šåœ¨ä½ çš„é¡¹ç›®ä¸­ç”Ÿæˆå¦‚ä¸‹æ–‡ä»¶ï¼Œè¯·å°†è¿™äº›æ–‡ä»¶ä¸æºä»£ç ä¸€èµ·ç®¡ç†
mvnw: è¿™æ˜¯ Linux Script å¯æ‰§è¡Œæ–‡ä»¶ï¼Œç”¨æ¥ä»£æ›¿ mvn mvnw.</description></item><item><title>Estimate host capacity based on QPS</title><link>https://coolbeevip.github.io/posts/stress-testing-host-estimate-with-qps/</link><pubDate>Wed, 07 Mar 2018 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/stress-testing-host-estimate-with-qps/</guid><description>é€šè¿‡å•ä¸ªæœåŠ¡å™¨å‹æµ‹çš„ QPS ä¼°ç®—éœ€è¦çš„æœåŠ¡å™¨æ•°é‡
å·²çŸ¥ QPS å’ŒæœŸæœ›æ¯ç¬”è€—æ—¶ï¼Œä¼°ç®—æœåŠ¡å™¨æ•°é‡ æœåŠ¡å™¨æ•°é‡ $$ = QPS \div (1000 \div æ¯ç¬”æ¯«ç§’) \div æ¯æœåŠ¡å™¨CPUä¸ªæ•° $$
ä¾‹å¦‚ï¼š
QPSï¼šæ¯ç§’å¤„ç†3200ç¬” æ¯ç¬”æ¯«ç§’ï¼š50ms æ¯ä¸ªæœåŠ¡å™¨CPUä¸ªæ•°ï¼š16 æœåŠ¡å™¨æ•°é‡ $$ 3200_{qps} \div (1000_{ms} \div 50_{ms}) \div 16_{cpu} = 10_{å°} $$
å·²çŸ¥ QPS ä»¥åŠæœåŠ¡å™¨æ•°é‡ï¼Œä¼°ç®—æ¯ç¬”è€—æ—¶ æ¯ç¬”è€—æ—¶æ¯«ç§’ $$ = 1000 \div ( QPS \div ( æœåŠ¡å™¨æ•°é‡ \times æ¯æœåŠ¡å™¨CPUä¸ªæ•° ) ) $$
ä¾‹å¦‚ï¼š
QPSï¼šæ¯ç§’å¤„ç†3200ç¬” æœåŠ¡å™¨æ•°é‡ï¼š10 æ¯æœåŠ¡å™¨CPUä¸ªæ•°ï¼š16 æ¯ç¬”è€—æ—¶æ¯«ç§’ $$ 1000 \div ( 3200 \div ( 10 \times 16 ) ) = 50_{ms}$$</description></item></channel></rss>