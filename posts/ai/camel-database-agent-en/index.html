<!doctype html><html lang=en data-theme><head><title>Lei Zhang </title><meta charset=utf-8><meta name=generator content="Hugo 0.123.3"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=description content="This is my knowledge base. I document things here"><link rel=stylesheet href=/css/style.min.7cf3c5090ac13256a5fa5531e5649cfe5a2ba7de88dca14ce0b6e253409a3511.css integrity="sha256-fPPFCQrBMlal+lUx5WSc/lorp96I3KFM4LbiU0CaNRE=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/markupHighlight.min.f798cbda9aaa38f89eb38be6414bd082cfd71a6780375cbf67b6d2fb2b96491e.css integrity="sha256-95jL2pqqOPies4vmQUvQgs/XGmeAN1y/Z7bS+yuWSR4=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/custom.min.d03676fac5605f1e95639c8b2239ea77daf8804fe13da2208bb83b252959846c.css integrity="sha256-0DZ2+sVgXx6VY5yLIjnqd9r4gE/hPaIgi7g7JSlZhGw=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin=anonymous><link rel="shortcut icon" href=/favicons/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicons/favicon-16x16.png><link rel=canonical href=/posts/ai/camel-database-agent-en/><script type=text/javascript src=/js/anatole-header.min.df804b63b5bd8474ea0756ea874bc8f1e92552708cc6ea43aa0d76981dc419f9.js integrity="sha256-34BLY7W9hHTqB1bqh0vI8eklUnCMxupDqg12mB3EGfk=" crossorigin=anonymous></script><meta name=twitter:card content="summary"><meta name=twitter:title content><meta name=twitter:description content="Pain Points in Data Analysis and Solutions In today&rsquo;s data-driven business environment, a common scenario is: business analysts urgently need certain data analysis but must wait for technical team members who know SQL to provide support. According to a McKinsey study, analysts spend an average of 30-40% of their time just on data preparation and query construction. This dependency not only delays the decision-making process but also increases the workload of the technical team."></head><body><div class="sidebar ."><div class=logo-title><div class=title><img src=/images/profile.jpg alt="profile picture"><h3 title><a href=/>I'm Lei Zhang</a></h3><div class=description><p>This is my knowledge base. I document things here</p></div></div><p><a href=https://github.com/coolbeevip><img src="https://img.shields.io/github/followers/coolbeevip?label=follow&amp;style=social" alt="GitHub coolbeevip"></a>
<img src=https://badges.pufler.dev/commits/all/coolbeevip alt="Commits Badge">
<img src=https://badges.pufler.dev/repos/coolbeevip alt="Repos Badge">
<img src=https://badges.pufler.dev/years/coolbeevip alt="Years Badge"></p></div><ul class=social-links><li><a href=https://github.com/coolbeevip/ rel=me aria-label=GitHub><i class="fab fa-github fa-2x" aria-hidden=true></i></a></li><li><a href=mailto:zhanglei@apache.org rel=me aria-label=e-mail><i class="fas fa-envelope fa-2x" aria-hidden=true></i></a></li></ul><div class=footer><div class=by_farbox>&copy; Lei Zhang 2025</div></div></div><div class=main><div class="page-top ."><a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span></a><ul class=nav id=navMenu><li><a href=/ title>Home</a></li><li><a href=/posts title>Blog</a></li><li><a href=/bookmarks title>Bookmarks</a></li><li><a href=/about/ title>About</a></li></ul></div><div class=autopagerize_page_element><div class=content><div class="post ."><div class=post-content><div class=post-title><h3></h3></div><h2 id=pain-points-in-data-analysis-and-solutions>Pain Points in Data Analysis and Solutions</h2><p>In today&rsquo;s data-driven business environment, a common scenario is: business analysts urgently need certain data analysis but must wait for technical team members who know SQL to provide support. According to a McKinsey study, analysts spend an average of 30-40% of their time just on data preparation and query construction. This dependency not only delays the decision-making process but also increases the workload of the technical team.</p><p><strong>This is why I developed CAMEL DatabaseAgent</strong> — a revolutionary open-source tool that allows anyone to converse with databases using natural language, as simply as talking to a colleague. Without writing a single line of SQL code, analysts can directly obtain the data insights they need.</p><h2 id=core-advantages-of-camel-databaseagent>Core Advantages of CAMEL DatabaseAgent</h2><p>Compared to other text-to-SQL tools on the market, CAMEL DatabaseAgent has the following significant advantages:</p><ol><li><strong>Fully open-source</strong>: Transparent code and community-driven development ensure continuous improvement and customization flexibility</li><li><strong>Multi-language support</strong>: Ability to understand and respond to queries in multiple languages including Chinese, English, and Korean</li><li><strong>Automatic database understanding</strong>: Analyzes database structure and generates appropriate few-shot learning examples</li><li><strong>Read-only mode</strong>: Default safe operation that protects databases from accidental modifications</li><li><strong>Simple integration</strong>: Easy to integrate with existing systems and workflows</li></ol><h2 id=technical-architecture-how-it-works>Technical Architecture: How It Works</h2><p>CAMEL DatabaseAgent is built on the <a href=https://github.com/camel-ai/camel>CAMEL-AI</a> and consists of three core components:</p><ol><li><p><strong>DataQueryInferencePipeline</strong>: This intelligent component analyzes your database structure and automatically generates training examples, including questions and corresponding SQL queries. It uses advanced inference techniques to understand relationships between tables and the semantics of the data.</p></li><li><p><strong>DatabaseKnowledge</strong>: A specially designed vector database for efficiently storing and retrieving database schemas, sample data, and query patterns. This component enables the system to quickly &ldquo;recall&rdquo; relevant database knowledge to answer user questions.</p></li><li><p><strong>DatabaseAgent</strong>: An intelligent agent based on large language models (LLMs) that receives natural language questions, uses DatabaseKnowledge to generate precise SQL queries, executes queries, and returns results in a user-friendly format.</p></li></ol><p>Supported database systems include:</p><ul><li>SQLite</li><li>MySQL</li><li>PostgreSQL</li></ul><p>All operations are performed in read-only mode by default, ensuring data security.</p><h2 id=real-world-application-cases-from-simple-to-complex>Real-world Application Cases: From Simple to Complex</h2><p>I tested this tool on a real database from a music distribution platform, and the results were impressive. Here are several application scenarios in increasing order of complexity:</p><h3 id=basic-queries>Basic Queries</h3><p>When I asked &ldquo;Find the names of playlists containing more than 10 tracks,&rdquo; the system immediately generated the correct SQL:</p><p><img src=https://dev-to-uploads.s3.amazonaws.com/uploads/articles/p59967pz7aa1s5zfwy5l.png alt="Basic Queries">
<em>The system can understand simple filtering and counting requirements</em></p><h3 id=medium-complexity-queries>Medium Complexity Queries</h3><p><strong>Scenario 1</strong>: Statistics on sales data within a specific time period
<img src=https://dev-to-uploads.s3.amazonaws.com/uploads/articles/euwl7x1vsguxb261q6jp.png alt="Statistics on sales data within a specific time period">
<em>The system successfully handled multi-table joins and time range filtering</em></p><p><strong>Scenario 2</strong>: Financial analysis grouped by category
<img src=https://dev-to-uploads.s3.amazonaws.com/uploads/articles/xqszsb3f3iz8sz2x0y9l.png alt="Financial analysis grouped by category">
<em>The system can understand grouping, aggregation, and complex table relationships</em></p><h3 id=advanced-analysis-queries>Advanced Analysis Queries</h3><p><strong>Scenario 3</strong>: Performance ranking analysis
<img src=https://dev-to-uploads.s3.amazonaws.com/uploads/articles/rqnoz17bfj4i8hlmd9h5.png alt="Performance ranking analysis">
<em>The system handled multi-table joins, sorting, and limit conditions</em></p><p><strong>Scenario 4</strong>: Conditional filtering and counting
<img src=https://dev-to-uploads.s3.amazonaws.com/uploads/articles/9njyfdoqbo6vqptwlfwh.png alt="Conditional filtering and counting">
<em>The system can use subqueries and complex conditions</em></p><p><strong>Scenario 5</strong>: Percentage calculation
<img src=https://dev-to-uploads.s3.amazonaws.com/uploads/articles/2sixx8svti4cna9fiame.png alt="Percentage calculation">
<em>The system can perform mathematical calculations and conditional counting</em></p><p><strong>Scenario 6</strong>: Complex relational analysis
<img src=https://dev-to-uploads.s3.amazonaws.com/uploads/articles/hbt974z5gjkc7ytt33xi.png alt="Complex relational analysis">
<em>The system can handle left joins and null value situations</em></p><h2 id=breaking-language-barriers-multi-language-support>Breaking Language Barriers: Multi-language Support</h2><p>In globalized team environments, language barriers are often bottlenecks for data collaboration. CAMEL DatabaseAgent supports multi-language interaction, allowing team members from different language backgrounds to train knowledge and perform data queries in their native languages.</p><p><img src=https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ud9hu1y88lxhaom0njuq.png alt=Chinese>
<em>Training knowledge and asking questions in Chinese</em></p><p><img src=https://dev-to-uploads.s3.amazonaws.com/uploads/articles/oy86w2j11aby26duxfts.png alt=Korean>
<em>The system also supports other languages like Korean, and all you need to do is specify the language when connecting to the database</em></p><h2 id=getting-started-guide-up-and-running-in-5-minutes>Getting Started Guide: Up and Running in 5 Minutes</h2><p>Want to try CAMEL DatabaseAgent? Just a few simple steps:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 1. Clone the repository</span>
</span></span><span style=display:flex><span>git clone git@github.com:coolbeevip/camel-database-agent.git
</span></span><span style=display:flex><span>cd camel-database-agent
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 2. Set up the environment</span>
</span></span><span style=display:flex><span>pip install uv ruff mypy
</span></span><span style=display:flex><span>uv venv .venv --python<span style=color:#f92672>=</span>3.10
</span></span><span style=display:flex><span>source .venv/bin/activate
</span></span><span style=display:flex><span>uv sync --all-extras
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 3. Configure API keys</span>
</span></span><span style=display:flex><span>export OPENAI_API_KEY<span style=color:#f92672>=</span>sk-xxx
</span></span><span style=display:flex><span>export OPENAI_API_BASE_URL<span style=color:#f92672>=</span>https://api.openai.com/v1/
</span></span><span style=display:flex><span>export MODEL_NAME<span style=color:#f92672>=</span>gpt-4o-mini
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 4. Connect to the sample database and start using</span>
</span></span><span style=display:flex><span>python camel_database_agent/cli.py <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--database-url sqlite:///database/sqlite/music.sqlite
</span></span></code></pre></div><p>On first connection, the system will spend a few minutes analyzing the database and generating a knowledge base. Subsequent use will be very smooth, with response times typically within 1-3 seconds.</p><h2 id=integration-api-for-developers>Integration API for Developers</h2><p>For developers who wish to integrate this functionality into their own applications or systems, we provide a concise Python API:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Install the dependency library</span>
</span></span><span style=display:flex><span>pip install camel<span style=color:#f92672>-</span>database<span style=color:#f92672>-</span>agent
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Initialize the database agent</span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> camel_database_agent <span style=color:#f92672>import</span> DatabaseAgent, DatabaseManager, TrainLevel
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> camel_database_agent.models <span style=color:#f92672>import</span> ModelFactory, OpenAIEmbedding
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> uuid
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>database_agent <span style=color:#f92672>=</span> DatabaseAgent(
</span></span><span style=display:flex><span>    interactive_mode<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>,
</span></span><span style=display:flex><span>    database_manager<span style=color:#f92672>=</span>DatabaseManager(db_url<span style=color:#f92672>=</span>database_url),
</span></span><span style=display:flex><span>    model<span style=color:#f92672>=</span>ModelFactory<span style=color:#f92672>.</span>create(
</span></span><span style=display:flex><span>        provider<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;openai&#34;</span>,
</span></span><span style=display:flex><span>        model_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;gpt-4o-mini&#34;</span>
</span></span><span style=display:flex><span>    ),
</span></span><span style=display:flex><span>    embedding_model<span style=color:#f92672>=</span>OpenAIEmbedding()
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Train the agent on database schema knowledge</span>
</span></span><span style=display:flex><span>database_agent<span style=color:#f92672>.</span>train_knowledge(level<span style=color:#f92672>=</span>TrainLevel<span style=color:#f92672>.</span>MEDIUM)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Execute queries using natural language</span>
</span></span><span style=display:flex><span>response <span style=color:#f92672>=</span> database_agent<span style=color:#f92672>.</span>ask(
</span></span><span style=display:flex><span>    session_id<span style=color:#f92672>=</span>str(uuid<span style=color:#f92672>.</span>uuid4()),
</span></span><span style=display:flex><span>    question<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;List all playlists containing more than 5 tracks&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Process the returned results</span>
</span></span><span style=display:flex><span>print(response<span style=color:#f92672>.</span>answer)  <span style=color:#75715e># Natural language answer</span>
</span></span><span style=display:flex><span>print(response<span style=color:#f92672>.</span>sql)     <span style=color:#75715e># Generated SQL query</span>
</span></span><span style=display:flex><span>print(response<span style=color:#f92672>.</span>data)    <span style=color:#75715e># Structured query results</span>
</span></span></code></pre></div><h2 id=conclusion>Conclusion</h2><p>CAMEL DatabaseAgent represents the future of database interaction—making data queries as natural as everyday conversation. It not only improves the efficiency of data analysts but also empowers non-technical personnel to directly obtain data insights, thereby accelerating the decision-making process across the entire organization.</p><p>In the era of data democratization, tools should not be barriers to gaining insights. Through CAMEL DatabaseAgent, I hope to contribute to breaking down these barriers, allowing everyone to easily converse with data.</p><p><a href=https://github.com/coolbeevip/camel-database-agent>GitHub</a></p><p>If you find this project valuable, don&rsquo;t forget to give it a star ⭐! Your support is the driving force behind the development of open-source projects!</p></div><div class=post-footer><div class=info></div></div></div></div></div></div><script type=text/javascript src=/js/medium-zoom.min.e1c6918cbaa90022a5612f0bd71c7bf3be6d036614c5729cebfe14f7b91fa4bc.js integrity="sha256-4caRjLqpACKlYS8L1xx7875tA2YUxXKc6/4U97kfpLw=" crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.css integrity=sha384-t5CR+zwDAROtph0PXGte6ia8heboACF9R5l/DiY+WZ3P2lxNgvJkQk5n7GPvLMYw crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.js integrity=sha384-FaFLTlohFghEIZkw6VGwmf9ISTubWAVYW8tG8+w2LAIftJEULZABrF9PPFv+tVkH crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/contrib/auto-render.min.js integrity=sha384-bHBqxz8fokvgoJ/sc17HODNxa42TlaEhB+w8ZJXTc2nZf1VgEaFZeZvT4Mznfz0v crossorigin=anonymous onload=renderMathInElement(document.body)></script></body></html>