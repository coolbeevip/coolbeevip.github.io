<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>elasticsearch on</title><link>https://coolbeevip.github.io/categories/elasticsearch/</link><description>Recent content in elasticsearch on</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Tue, 28 Jul 2020 13:24:14 +0800</lastBuildDate><atom:link href="https://coolbeevip.github.io/categories/elasticsearch/index.xml" rel="self" type="application/rss+xml"/><item><title>Migrate Spring Data Elasticsearch from 3.x version to 4.x</title><link>https://coolbeevip.github.io/posts/elasticsearch/migrate-spring-data-elasticsearch-from-3.x-version-to-4.x/</link><pubDate>Tue, 28 Jul 2020 13:24:14 +0800</pubDate><guid>https://coolbeevip.github.io/posts/elasticsearch/migrate-spring-data-elasticsearch-from-3.x-version-to-4.x/</guid><description>Spring Data Elasticsearch 从 3.X 迁移到 4.X
因为需要将产品的 spring boot 2.1.6.RELEASE 升级到 2.3.12.RELEASE，升级过程中发现有一些需要迁移的部分，特此整理记录。 本文不是迁移指南，仅仅是工作中遇到的迁移问题笔记
依赖组件 组件 迁移前 迁移后 spring-data-elasticsearch 3.1.9 4.0.9 elasticsearch 6.4.3 7.6.2 GetQuery 已废弃 以下代码中 GetQuery 已经被废弃，并且 getQuery.setId 方法已经被删除
GetQuery getQuery = new GetQuery(); getQuery.setId(globalTxId); GlobalTransactionDocument globalTransaction = this.template .queryForObject(getQuery, GlobalTransactionDocument.class); 使用以下代码替换
Query query = new NativeSearchQueryBuilder().withIds(Collections.singletonList(globalTxId)).build(); SearchHit&amp;lt;GlobalTransactionDocument&amp;gt; result = this.template.searchOne(query, GlobalTransactionDocument.class); GlobalTransactionDocument globalTransaction = result.</description></item></channel></rss>